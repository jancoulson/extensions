!function(e){function t(t){for(var r,u,l=t[0],i=t[1],c=t[2],s=0,d=[];s<l.length;s++)u=l[s],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&d.push(a[u][0]),a[u]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(f&&f(t);d.length;)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,l=1;l<n.length;l++){var i=n[l];0!==a[i]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={0:0},o=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="";var l=window.webpackJsonp=window.webpackJsonp||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var f=i;o.push([697,1]),n()}({1086:function(e,t,n){var r={"./af":465,"./af.js":465,"./ar":466,"./ar-dz":467,"./ar-dz.js":467,"./ar-kw":468,"./ar-kw.js":468,"./ar-ly":469,"./ar-ly.js":469,"./ar-ma":470,"./ar-ma.js":470,"./ar-sa":471,"./ar-sa.js":471,"./ar-tn":472,"./ar-tn.js":472,"./ar.js":466,"./az":473,"./az.js":473,"./be":474,"./be.js":474,"./bg":475,"./bg.js":475,"./bm":476,"./bm.js":476,"./bn":477,"./bn-bd":478,"./bn-bd.js":478,"./bn.js":477,"./bo":479,"./bo.js":479,"./br":480,"./br.js":480,"./bs":481,"./bs.js":481,"./ca":482,"./ca.js":482,"./cs":483,"./cs.js":483,"./cv":484,"./cv.js":484,"./cy":485,"./cy.js":485,"./da":486,"./da.js":486,"./de":487,"./de-at":488,"./de-at.js":488,"./de-ch":489,"./de-ch.js":489,"./de.js":487,"./dv":490,"./dv.js":490,"./el":491,"./el.js":491,"./en-au":492,"./en-au.js":492,"./en-ca":493,"./en-ca.js":493,"./en-gb":494,"./en-gb.js":494,"./en-ie":495,"./en-ie.js":495,"./en-il":496,"./en-il.js":496,"./en-in":497,"./en-in.js":497,"./en-nz":498,"./en-nz.js":498,"./en-sg":499,"./en-sg.js":499,"./eo":500,"./eo.js":500,"./es":501,"./es-do":502,"./es-do.js":502,"./es-mx":503,"./es-mx.js":503,"./es-us":504,"./es-us.js":504,"./es.js":501,"./et":505,"./et.js":505,"./eu":506,"./eu.js":506,"./fa":507,"./fa.js":507,"./fi":508,"./fi.js":508,"./fil":509,"./fil.js":509,"./fo":510,"./fo.js":510,"./fr":511,"./fr-ca":512,"./fr-ca.js":512,"./fr-ch":513,"./fr-ch.js":513,"./fr.js":511,"./fy":514,"./fy.js":514,"./ga":515,"./ga.js":515,"./gd":516,"./gd.js":516,"./gl":517,"./gl.js":517,"./gom-deva":518,"./gom-deva.js":518,"./gom-latn":519,"./gom-latn.js":519,"./gu":520,"./gu.js":520,"./he":521,"./he.js":521,"./hi":522,"./hi.js":522,"./hr":523,"./hr.js":523,"./hu":524,"./hu.js":524,"./hy-am":525,"./hy-am.js":525,"./id":526,"./id.js":526,"./is":527,"./is.js":527,"./it":528,"./it-ch":529,"./it-ch.js":529,"./it.js":528,"./ja":530,"./ja.js":530,"./jv":531,"./jv.js":531,"./ka":532,"./ka.js":532,"./kk":533,"./kk.js":533,"./km":534,"./km.js":534,"./kn":535,"./kn.js":535,"./ko":536,"./ko.js":536,"./ku":537,"./ku.js":537,"./ky":538,"./ky.js":538,"./lb":539,"./lb.js":539,"./lo":540,"./lo.js":540,"./lt":541,"./lt.js":541,"./lv":542,"./lv.js":542,"./me":543,"./me.js":543,"./mi":544,"./mi.js":544,"./mk":545,"./mk.js":545,"./ml":546,"./ml.js":546,"./mn":547,"./mn.js":547,"./mr":548,"./mr.js":548,"./ms":549,"./ms-my":550,"./ms-my.js":550,"./ms.js":549,"./mt":551,"./mt.js":551,"./my":552,"./my.js":552,"./nb":553,"./nb.js":553,"./ne":554,"./ne.js":554,"./nl":555,"./nl-be":556,"./nl-be.js":556,"./nl.js":555,"./nn":557,"./nn.js":557,"./oc-lnc":558,"./oc-lnc.js":558,"./pa-in":559,"./pa-in.js":559,"./pl":560,"./pl.js":560,"./pt":561,"./pt-br":562,"./pt-br.js":562,"./pt.js":561,"./ro":563,"./ro.js":563,"./ru":564,"./ru.js":564,"./sd":565,"./sd.js":565,"./se":566,"./se.js":566,"./si":567,"./si.js":567,"./sk":568,"./sk.js":568,"./sl":569,"./sl.js":569,"./sq":570,"./sq.js":570,"./sr":571,"./sr-cyrl":572,"./sr-cyrl.js":572,"./sr.js":571,"./ss":573,"./ss.js":573,"./sv":574,"./sv.js":574,"./sw":575,"./sw.js":575,"./ta":576,"./ta.js":576,"./te":577,"./te.js":577,"./tet":578,"./tet.js":578,"./tg":579,"./tg.js":579,"./th":580,"./th.js":580,"./tk":581,"./tk.js":581,"./tl-ph":582,"./tl-ph.js":582,"./tlh":583,"./tlh.js":583,"./tr":584,"./tr.js":584,"./tzl":585,"./tzl.js":585,"./tzm":586,"./tzm-latn":587,"./tzm-latn.js":587,"./tzm.js":586,"./ug-cn":588,"./ug-cn.js":588,"./uk":589,"./uk.js":589,"./ur":590,"./ur.js":590,"./uz":591,"./uz-latn":592,"./uz-latn.js":592,"./uz.js":591,"./vi":593,"./vi.js":593,"./x-pseudo":594,"./x-pseudo.js":594,"./yo":595,"./yo.js":595,"./zh-cn":596,"./zh-cn.js":596,"./zh-hk":597,"./zh-hk.js":597,"./zh-mo":598,"./zh-mo.js":598,"./zh-tw":599,"./zh-tw.js":599};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=1086},113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moduleName=t.TARGET_VALUES=t.DEFAULT_JOURNEY_NOTIFICATION=void 0;t.moduleName="notification-journeys";var r=t.TARGET_VALUES={URL:"url",SCREEN:"screen"};t.DEFAULT_JOURNEY_NOTIFICATION={body:"",contentUrl:"",shortcutId:"",delay:1,action:"",target:{value:r.URL},title:""}},1233:function(e,t,n){var r={"./ckb.js":207,"./da.js":208,"./de.js":209,"./en.js":115,"./es.js":210,"./fr.js":211,"./he.js":212,"./index.js":1234,"./it.js":213,"./ja.js":214,"./ko.js":215,"./lv.js":216,"./nl.js":217,"./pl.js":218,"./pt_br.js":219,"./ro.js":220,"./ru.js":221,"./se.js":222,"./ua.js":223,"./zh_cn.js":224};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=1233},1272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GeneralPage",{enumerable:!0,get:function(){return r.GeneralPage}}),Object.defineProperty(t,"GroupsPage",{enumerable:!0,get:function(){return a.GroupsPage}}),Object.defineProperty(t,"JourneysPage",{enumerable:!0,get:function(){return o.JourneysPage}}),Object.defineProperty(t,"NotificationsPage",{enumerable:!0,get:function(){return u.NotificationsPage}});var r=n(1273),a=n(1458),o=n(1460),u=n(1464)},1273:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GeneralPage",{enumerable:!0,get:function(){return a.default}});var a=r(n(1274))},1274:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(14)),u=r(n(7)),l=r(n(8)),i=r(n(5)),c=r(n(9)),f=r(n(10)),s=r(n(11)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),p=n(17),m=n(44),v=r(n(18)),E=r(n(26)),g=r(n(19)),h=r(n(0)),b=n(38),y=r(n(33)),_=n(1276),O=n(200),P=n(35),N=n(51),T=n(23),j=r(n(1456));function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}n(1457);var L=function(e){(0,c.default)(n,e);var t=A(n);function n(e){var r;(0,u.default)(this,n),r=t.call(this,e),(0,v.default)((0,i.default)(r));var a=e.extension.settings,o=void 0===a?{}:a,l=o.chime,c=void 0===l?{}:l,f=o.scheduledNotificationsEnabled,s=void 0!==f&&f,d=o.reminder,p=void 0===d?{}:d;return r.state={chime:c,reminder:p,scheduledNotificationsEnabled:s,shouldInvalidateCurrentBuild:!1,error:!1,submitting:!1},r}return(0,l.default)(n,[{key:"handleChimeUpload",value:function(e,t){this.setState({chime:e,shouldInvalidateCurrentBuild:t})}},{key:"handleChimeDelete",value:function(e){this.setState({chime:{fileName:null,fileUrl:null},shouldInvalidateCurrentBuild:e})}},{key:"handleReminderMessageChange",value:function(e){var t=this.state.reminder,n=e.target.value,r=S(S({},t),{},{message:n});this.setState({reminder:r})}},{key:"handleReminderToggle",value:function(e){var t,n=this.props.extension.settings,r="true"===e,a=r?null===(t=(void 0===n?{}:n).reminder)||void 0===t?void 0:t.message:"";this.setState({reminder:{message:a,enabled:r}})}},{key:"handleScheduledNotificationsToggle",value:function(e){var t="true"===e;this.setState({scheduledNotificationsEnabled:t})}},{key:"handleSave",value:function(){var e=this,t=this.props,n=t.extension,r=t.invalidateCurrentBuild,a=t.updateExtensionSettings,o=this.state,u=o.chime,l=o.reminder,i=o.scheduledNotificationsEnabled,c=o.shouldInvalidateCurrentBuild;if(l.enabled&&g.default.isEmpty(l.message))this.setState({error:E.default.t(j.default.ERROR_MESSAGE)});else{this.setState({submitting:!0});var f=S(S({},n.settings),{},{chime:u,reminder:l,scheduledNotificationsEnabled:i});a(n,f).then((function(){c&&r(n.app),e.setState({chime:u,error:null,submitting:!1})}))}}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.handleSave()}},{key:"render",value:function(){var e,t=this.props,n=t.extension,r=t.extension.settings,a=void 0===r?{}:r,o=this.state,u=o.chime,l=o.error,i=o.reminder,c=o.scheduledNotificationsEnabled,f=o.submitting,s=n.app,m=null===(e=a.services)||void 0===e||null===(e=e.core)||void 0===e?void 0:e.apps,v={chime:a.chime,reminder:a.reminder,scheduledNotificationsEnabled:a.scheduledNotificationsEnabled},g=f||!function(e,t){return JSON.stringify(e)!==JSON.stringify(t)}(v,{chime:u,reminder:i,scheduledNotificationsEnabled:c}),h=f||!(0,T.isInitialized)(n)||(0,T.isBusy)(n);return d.default.createElement("form",{className:"settings-page",onSubmit:this.handleSubmit},d.default.createElement(P.LoaderContainer,{isOverlay:!0,isLoading:h},d.default.createElement(_.ChimeUploader,{appsUrl:m,appId:s,chime:u,onDelete:this.handleChimeDelete,onUploadSuccess:this.handleChimeUpload}),d.default.createElement(_.NotificationSettings,{appId:s,appsUrl:m,onReminderMessageChange:this.handleReminderMessageChange,onScheduledNotificationsToggle:this.handleScheduledNotificationsToggle,onToggleReminder:this.handleReminderToggle,reminder:i,scheduledNotificationsEnabled:c}),d.default.createElement(p.ButtonToolbar,null,d.default.createElement(p.Button,{bsSize:"large",bsStyle:"primary",disabled:g,type:"submit"},d.default.createElement(P.LoaderContainer,{isLoading:f},E.default.t(j.default.BUTTON_SAVE)))),l&&d.default.createElement("div",{className:"has-error"},d.default.createElement(p.HelpBlock,null,l))))}}]),n}(d.PureComponent);L.propTypes={extension:h.default.object.isRequired};t.default=(0,m.connect)((function(e){return{extension:(0,N.getExtension)(e,(0,y.default)())}}),(function(e){return(0,b.bindActionCreators)({invalidateCurrentBuild:O.invalidateCurrentBuild,updateExtensionSettings:N.updateExtensionSettings},e)}))(L)},1275:function(e){e.exports=JSON.parse('{"name":"shoutem.notification-center","version":"8.1.0","description":"Manage push notification settings within the app","scripts":{"lint":"eslint --no-eslintrc -c .eslintrc src/**/*.{js,jsx}","clean":"rimraf ./build/*","build":"npm run clean && cross-env NODE_ENV=production webpack --config ./bin/webpack/webpack.config.js","dev":"webpack-dev-server --config ./bin/webpack/webpack.config.js"},"devDependencies":{"@babel/core":"^7.8.4","@babel/plugin-proposal-class-properties":"^7.8.3","@babel/plugin-transform-modules-commonjs":"^7.8.3","@babel/plugin-transform-runtime":"^7.8.3","@babel/preset-env":"^7.8.4","@babel/preset-react":"^7.8.3","@shoutem/eslint-config-react":"^1.0.5","babel-eslint":"^10.1.0","babel-loader":"^8.0.6","cross-env":"^4.0.0","css-loader":"^3.4.2","cssnano":"^4.1.10","eslint":"^6.8.0","eslint-loader":"^3.0.3","eslint-plugin-babel":"^5.3.0","eslint-plugin-import":"^2.24.2","eslint-plugin-jsx-a11y":"^6.4.0","eslint-plugin-prettier":"3.1.3","eslint-plugin-react":"^7.21.5","file-loader":"^6.0.0","html-webpack-plugin":"^4.0.3","mini-css-extract-plugin":"0.9.0","optimize-css-assets-webpack-plugin":"5.0.3","terser-webpack-plugin":"2.3.5","path":"^0.12.7","postcss-loader":"^3.0.0","prettier":"1.19.1","rimraf":"^3.0.2","sass":"1.54.1","sass-loader":"10.2.0","style-loader":"^1.1.3","url-loader":"^3.0.0","webpack":"^4.41.6","webpack-cli":"^3.3.11","webpack-dev-server":"^3.10.3","eslint-plugin-react-hooks":"^4.2.0","eslint-plugin-simple-import-sort":"^7.0.0"},"dependencies":{"@shoutem/assets-sdk":"^1.0.1","@shoutem/extension-sandbox":"^0.1.4","@shoutem/react-web-ui":"^1.0.2","@shoutem/redux-api-sdk":"2.0.4","@shoutem/redux-composers":"^0.1.6","@shoutem/redux-io":"^3.2.5","@shoutem/redux-sync-state-engine":"^0.0.2","auto-bind":"^4.0.0","classnames":"^2.2.6","es6-promise":"^4.1.1","fetch-everywhere":"^1.0.5","i18next":"^19.7.0","lodash":"^4.17.4","moment":"^2.16.0","react":"^16.12.0","react-dom":"^16.12.0","react-dropzone":"^4.2.1","react-redux":"^7.1.3","react-select":"^1.0.0-rc.5","redux":"^4.0.5","redux-form":"^5.2.5","redux-thunk":"~2.2.0","reselect":"^2.5.4","urijs":"^1.19.2","prop-types":"^15.7.2","react-i18next":"^11.7.3"},"babel":{"presets":["@babel/preset-env","@babel/preset-react"],"plugins":["@babel/plugin-transform-runtime","@babel/plugin-proposal-class-properties","@babel/plugin-transform-modules-commonjs"]}}')},1276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeUploader",{enumerable:!0,get:function(){return a.ChimeUploader}}),Object.defineProperty(t,"NotificationSettings",{enumerable:!0,get:function(){return r.NotificationSettings}});var r=n(631),a=n(1293)},1277:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeFilePreview",{enumerable:!0,get:function(){return a.default}});var a=r(n(1278))},1278:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var a=r(n(56)),o=r(n(1)),u=n(17),l=r(n(0)),i=n(1282),c=n(35);function f(e){var t=e.url,n=e.soundName,r=e.onDelete,l=(0,i.useAudioPlay)(t),f=(0,a.default)(l,2),s=f[0],d=f[1],p=s?"pause":"play";return o.default.createElement("div",{className:"chime-file-preview"},o.default.createElement(u.FormControl,{readOnly:!0,value:n}),o.default.createElement("div",{className:"chime-file-preview__play-pause"},o.default.createElement(c.FontIcon,{name:p,size:"24px",onClick:d})),o.default.createElement(u.Button,{bsSize:"small",onClick:r},o.default.createElement(c.FontIcon,{name:"delete",size:"24px"})))}n(1284),f.propTypes={url:l.default.string,soundName:l.default.string,onDelete:l.default.func}},1282:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useAudioPlay",{enumerable:!0,get:function(){return a.default}});var a=r(n(1283))},1283:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.useState)(new Audio(e)),n=(0,a.default)(t,1)[0],r=(0,o.useState)(!1),u=(0,a.default)(r,2),l=u[0],i=u[1];return(0,o.useEffect)((function(){return n.addEventListener("ended",(function(){return i(!1)})),function(){n.removeEventListener("ended",(function(){return i(!1)}))}}),[]),(0,o.useEffect)((function(){l?n.play():n.pause()}),[l]),[l,function(){i(!l)}]};var a=r(n(56)),o=n(1)},1284:function(e,t,n){},1285:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeUploadInput",{enumerable:!0,get:function(){return a.default}});var a=r(n(1286))},1286:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var a=r(n(1)),o=n(17),u=r(n(26)),l=r(n(0)),i=r(n(1287));function c(e){var t=e.onClick;return a.default.createElement("div",{className:"chime-upload-input",onClick:t},a.default.createElement(o.FormControl,{readOnly:!0}),a.default.createElement(o.Button,{bsSize:"large"},u.default.t(i.default.BUTTON_BROWSE)))}n(1288),c.propTypes={onClick:l.default.func.isRequired}},1287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="".concat("chime-upload-input",".button-browse");t.default={BUTTON_BROWSE:r}},1288:function(e,t,n){},1289:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationSettings",{enumerable:!0,get:function(){return a.default}});var a=r(n(1290))},1290:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var a=r(n(1)),o=n(17),u=r(n(26)),l=(r(n(19)),r(n(0))),i=n(35),c=r(n(1291));function f(e){var t=e.onReminderMessageChange,n=e.onScheduledNotificationsToggle,r=e.onToggleReminder,l=e.reminder,f=e.scheduledNotificationsEnabled,s=[{value:!0,label:u.default.t(c.default.ENABLED_LABEL)},{value:!1,label:u.default.t(c.default.DISABLED_LABEL)}],d=[{value:!0,label:u.default.t(c.default.ENABLED_LABEL)},{value:!1,label:u.default.t(c.default.DISABLED_LABEL)}];return a.default.createElement(a.default.Fragment,null,a.default.createElement("h3",null,u.default.t(c.default.PN_SETTINGS_TITLE)),a.default.createElement(o.FormGroup,null,a.default.createElement(o.ControlLabel,null,u.default.t(c.default.REMINDER_LABEL)),a.default.createElement(i.RadioSelector,{className:"notification-settings__radio-selector",groupName:"reminder",options:s,activeValue:l.enabled,onSelect:r})),a.default.createElement(o.FormGroup,{className:"notification-settings__form-message-margin"},a.default.createElement(o.ControlLabel,null,u.default.t(c.default.REMINDER_MESSAGE_LABEL)),a.default.createElement(o.FormControl,{disabled:!l.enabled,onChange:t,value:l.message})),a.default.createElement(o.FormGroup,null,a.default.createElement(o.ControlLabel,null,u.default.t(c.default.SCHEDULED_NOTIFICATIONS_LABEL)),a.default.createElement(i.RadioSelector,{className:"notification-settings__radio-selector",groupName:"scheduled-notifications",options:d,activeValue:f,onSelect:n})))}n(1292),f.propTypes={onReminderMessageChange:l.default.func,onScheduledNotificationsToggle:l.default.func,onToggleReminder:l.default.func,reminder:l.default.object,scheduledNotificationsEnabled:l.default.bool}},1291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="notification-settings",a="".concat(r,".disabled-label"),o="".concat(r,".enabled-label"),u="".concat(r,".reminder-label"),l="".concat(r,".pn-settings-title"),i="".concat(r,".reminder-message-label"),c="".concat(r,".scheduled-notifications-label");t.default={DISABLED_LABEL:a,ENABLED_LABEL:o,PN_SETTINGS_TITLE:l,REMINDER_LABEL:u,REMINDER_MESSAGE_LABEL:i,SCHEDULED_NOTIFICATIONS_LABEL:c}},1292:function(e,t,n){},1293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeUploader",{enumerable:!0,get:function(){return r.ChimeUploader}});var r=n(1294)},1294:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeUploader",{enumerable:!0,get:function(){return a.default}});var a=r(n(1295))},1295:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(7)),u=r(n(8)),l=r(n(5)),i=r(n(9)),c=r(n(10)),f=r(n(11)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),d=n(17),p=r(n(1485)),m=r(n(18)),v=r(n(26)),E=r(n(19)),g=r(n(0)),h=r(n(33)),b=n(632),y=n(35),_=n(631),O=r(n(1338));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}n(1339);var T=(0,h.default)();(t.default=function(e){(0,i.default)(n,e);var t=N(n);function n(e){var r;(0,o.default)(this,n),r=t.call(this,e),(0,m.default)((0,l.default)(r));var a=e.appId,u=e.appsUrl;return r.assetManager=new b.AssetManager({scopeType:"application",scopeId:a,assetPolicyHost:u}),r.dropzoneRef=(0,s.createRef)(),r.state={inProgress:!1,error:null},r}return(0,u.default)(n,[{key:"componentWillUnmount",value:function(){this.dropzoneRef=null}},{key:"handleFilesSelected",value:function(e){var t=this,n=E.default.head(e);if(n){var r=n.name.split(".");!function(e){return/^[a-z][a-z0-9_]*$/.test(e)}(E.default.head(r).toLowerCase())||r.length>2?this.setState({error:v.default.t(O.default.ERROR_INVALID_FILE_NAME)}):(this.setState({inProgress:!0,error:null}),this.upload(n).then((function(e){return t.handleUploadSucceeded(e.fileUrl,e.fileName)})).catch(this.handleUploadFailed))}}},{key:"upload",value:function(e){var t=this;return new Promise((function(n,r){var a=t.validateFileSize(e);return a?r(a):t.uploadFile(e).then((function(e){n(e)})).catch((function(e){return t.handleUploadFailed(e.message)}))}))}},{key:"validateFileSize",value:function(e){if(e.size>5e5){return v.default.t(O.default.ERROR_MAX_SIZE,{size:.5})}return null}},{key:"uploadFile",value:function(e){var t=this;return new Promise((function(n,r){var a,o,u,l,i=(a=e,o=(new Date).getTime(),u=E.default.head(a.name.split(".")),l=E.default.last(a.name.split(".")),"".concat(u.toLowerCase(),"_").concat(o,".").concat(l)),c="".concat(T,"/chime/").concat(i);return t.assetManager.uploadFile(c,e).then((function(e){n({fileUrl:e,fileName:i})})).catch((function(){return r(v.default.t(O.default.ERROR_UPLOAD_FAIL))}))}))}},{key:"handleUploadSucceeded",value:function(e,t){var n=this.props.onUploadSuccess;this.setState({inProgress:!1}),n({fileName:t,fileUrl:e},!0)}},{key:"handleUploadFailed",value:function(e){this.setState({error:e,inProgress:!1})}},{key:"handleDelete",value:function(){var e=this.props.onDelete;this.setState({error:null}),e(!0)}},{key:"handleOpenFilePicker",value:function(){this.dropzoneRef.current.open()}},{key:"render",value:function(){var e=this.props.chime,t=this.state,n=t.error,r=t.inProgress;return s.default.createElement(s.default.Fragment,null,s.default.createElement("h3",null,v.default.t(O.default.SETTINGS_TITLE)),s.default.createElement(d.Alert,{className:"publish-alert"},v.default.t(O.default.CHIME_ALERT)),s.default.createElement(d.FormGroup,null,s.default.createElement(d.ControlLabel,null,v.default.t(O.default.SOUND_LABEL)),s.default.createElement(y.LoaderContainer,{isLoading:r},s.default.createElement(p.default,{accept:"audio/mpeg",className:"file-uploader__dropzone",maxSize:5e5,onDrop:this.handleFilesSelected,ref:this.dropzoneRef}),!e.fileName&&s.default.createElement(_.ChimeUploadInput,{onClick:this.handleOpenFilePicker}),!!e.fileName&&s.default.createElement(_.ChimeFilePreview,{onDelete:this.handleDelete,soundName:e.fileName,url:e.fileUrl}),n&&s.default.createElement("div",{className:"text-error"},n))))}}]),n}(s.PureComponent)).propTypes={appsUrl:g.default.string,appId:g.default.string,chime:g.default.object,onDelete:g.default.func,onUploadSuccess:g.default.func}},1319:function(e,t){},1321:function(e,t){},1338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="chime-uploader-fragment",a="".concat(r,".chime-alert"),o="".concat(r,".error-file-reject"),u="".concat(r,".error-invalid-file-name"),l="".concat(r,".error-max-size"),i="".concat(r,".error-upload-fail"),c="".concat(r,".settings-title"),f="".concat(r,".sound-title");t.default={CHIME_ALERT:a,ERROR_FILE_REJECT:o,ERROR_INVALID_FILE_NAME:u,ERROR_MAX_SIZE:l,ERROR_UPLOAD_FAIL:i,SETTINGS_TITLE:c,SOUND_LABEL:f}},1339:function(e,t,n){},1381:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getApplicationStatus",{enumerable:!0,get:function(){return o.getApplicationStatus}}),Object.defineProperty(t,"loadApplicationStatus",{enumerable:!0,get:function(){return r.loadApplicationStatus}}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return a.reducer}});var r=n(1382),a=n(1385),o=n(1386)},1382:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.loadApplicationStatus=function(e){var t={schema:l.APPLICATION_STATUS,request:{endpoint:o.shoutemUrls.appsApi("v1/apps/".concat(e,"/status")),headers:{Accept:"application/vnd.api+json"}}};return(0,u.find)(t,(0,a.default)("status"))};var a=r(n(33)),o=n(63),u=n(23),l=n(203)},1383:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),o=r(n(8)),u=r(n(439)),l=r(n(19)),i=r(n(50));t.default=function(){function e(){(0,a.default)(this,e),(0,u.default)(this),this.legacyHost=null,this.authHost=null}return(0,o.default)(e,[{key:"init",value:function(e){var t=l.default.get(e,"pageContext.url",{}),n=t.legacy,r=t.apps,a=t.extensions;this.legacyHost=new i.default(n).host(),this.appsHost=new i.default(r).host(),this.extensionsHost=new i.default(a).host()}},{key:"legacyApi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new i.default(e).protocol(location.protocol).host(this.legacyHost).toString()}},{key:"appsApi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new i.default(e).protocol(location.protocol).host(this.appsHost).toString()}},{key:"extensionsApi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new i.default(e).protocol(location.protocol).host(this.extensionsHost).toString()}}]),e}()},1384:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.buildShortcutTree=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a.default.reduce(t,(function(t,r){if(t.push({shortcut:r,level:n}),r.children){var o=e(r.children,n+1);return a.default.concat(t,o)}return t}),[])},t.createOptions=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(a.default.isEmpty(e))return[];return a.default.reduce(e,(function(e,o){var u=a.default.toString(a.default.get(o,t)),l=a.default.get(o,n);if(u&&l){var i={value:u,label:l};a.default.forEach(r,(function(e){var t=a.default.get(o,e);a.default.set(i,e,t)})),e.push(i)}return e}),[])};var a=r(n(19))},1385:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var a,o=r(n(14)),u=n(38),l=r(n(33)),i=n(23),c=n(203);t.reducer=(0,u.combineReducers)((a={},(0,o.default)(a,c.APPLICATION_STATUS,(0,i.storage)(c.APPLICATION_STATUS)),(0,o.default)(a,"applicationStatus",(0,i.one)(c.APPLICATION_STATUS,(0,l.default)("status"))),a))},1386:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getApplicationStatus=function(e){var t=function(e){return e[(0,a.default)()][u.moduleName]}(e);return(0,o.getOne)(t.applicationStatus,e)};var a=r(n(33)),o=n(23),u=n(203)},1387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPublished",{enumerable:!0,get:function(){return r.isPublished}});var r=n(1388)},1388:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.isPublished=function(e){return"published"===(function(e){if(a.default.isObject(e))return a.default.get(e,"publish.status");return null}(e)||e)};var a=r(n(19))},1389:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=function(e,t){return function(n){var r={schema:i.GROUPS,request:{endpoint:u.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/Group")),method:"POST",headers:{Accept:"application/vnd.api+json"},body:JSON.stringify(t)}};return n((0,l.find)(r,(0,o.default)("groupsPage-create"))).then((function(){n((0,l.invalidate)(i.GROUPS))}))}},t.deleteGroup=function(e,t){return function(n){var r={schema:i.GROUPS,request:{endpoint:u.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/Group/").concat(t)),method:"DELETE",headers:{Accept:"application/vnd.api+json"}}};return n((0,l.find)(r,(0,o.default)("groupsPage-delete"))).then((function(){n((0,l.invalidate)(i.GROUPS))}))}},t.loadGroups=function(e){var t={schema:i.GROUPS,request:{endpoint:u.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/Group")),headers:{Accept:"application/vnd.api+json"}}};return(0,l.find)(t,(0,o.default)("groupsPage"))},t.updateGroup=function(e,t,n){return function(r){var f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t},n),s={schema:i.GROUPS,request:{endpoint:u.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/Group/").concat(t)),method:"POST",headers:{Accept:"application/vnd.api+json"},body:JSON.stringify(f)}};return r((0,l.find)(s,(0,o.default)("groupsPage-update"))).then((function(){r((0,l.invalidate)(i.GROUPS))}))}};var a=r(n(14)),o=r(n(33)),u=n(63),l=n(23),i=n(205);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}},1390:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var a,o=r(n(14)),u=n(38),l=r(n(33)),i=n(23),c=n(205);t.reducer=(0,u.combineReducers)((a={},(0,o.default)(a,c.GROUPS,(0,i.storage)(c.GROUPS)),(0,o.default)(a,"groups",(0,i.collection)(c.GROUPS,(0,l.default)("groupsPage"))),(0,o.default)(a,"rawGroups",(0,i.resource)(c.GROUPS)),a))},1391:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getGroups=function(e){var t=l(e).groups;return(0,o.getCollection)(t,e)},t.getRawGroups=function(e){return l(e).rawGroups};var a=r(n(33)),o=n(23),u=n(205);function l(e){return e[(0,a.default)()][u.moduleName]}},1392:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GroupForm",{enumerable:!0,get:function(){return a.default}});var a=r(n(1393))},1393:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(7)),u=r(n(8)),l=r(n(5)),i=r(n(9)),c=r(n(10)),f=r(n(11)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),d=n(17),p=r(n(18)),m=r(n(26)),v=r(n(0)),E=n(318),g=r(n(33)),h=n(200),b=n(35),y=n(1394),_=r(n(1397));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}n(1398);var N=function(e){(0,i.default)(n,e);var t=P(n);function n(e){var r;return(0,o.default)(this,n),r=t.call(this,e),(0,p.default)((0,l.default)(r)),r}return(0,u.default)(n,[{key:"handleImageUploadSuccess",value:function(e){var t=this.props,n=t.fields.imageUrl,r=t.touch;n.onChange(e),r(["imageUrl"])}},{key:"handleImageDeleteSuccess",value:function(){var e=this.props,t=e.fields.imageUrl,n=e.touch;t.onChange(""),n(["imageUrl"])}},{key:"resolveFilename",value:function(e){var t=(new Date).getTime();return e.name?"".concat(t,"-").concat(e.name):"".concat(t)}},{key:"render",value:function(){var e=this.props,t=e.assetManager,n=e.submitting,r=e.invalid,a=e.fields,o=a.id,u=a.name,l=a.imageUrl,i=a.subscribeByDefault,c=e.onCancel,f=e.handleSubmit,p=e.error,v=!!o.value,E=l.touched&&l.error;return s.default.createElement("form",{className:"group-form",onSubmit:f},s.default.createElement(d.Row,null,s.default.createElement(b.ReduxFormElement,{elementId:"name",name:m.default.t(_.default.FORM_NAME_INPUT_DESCRIPTION),maxLength:255,disabled:n,field:u})),s.default.createElement(d.Row,null,s.default.createElement(d.FormGroup,{controlId:"imageUrl",validationState:E?"error":"success"},s.default.createElement(d.ControlLabel,null,m.default.t(_.default.FORM_IMAGE_LABEL)),s.default.createElement(b.ImageUploader,{onUploadSuccess:this.handleImageUploadSuccess,onDeleteSuccess:this.handleImageDeleteSuccess,resolveFilename:this.resolveFilename,src:l.value,elementId:"imageUrl",helpText:m.default.t(_.default.FORM_IMAGE_HELP_TEXT),previewSize:"custom",width:120,height:120,folderName:(0,g.default)(),assetManager:t,disabled:n,preview:l.value,field:l}),s.default.createElement("div",{className:"has-error image-error"},E&&s.default.createElement(d.HelpBlock,null,l.error)))),s.default.createElement(d.Row,{className:"switch"},s.default.createElement(b.ReduxFormElement,{disabled:n,elementId:"subscribeByDefault",field:i,name:m.default.t(_.default.SUBSCRIBE_TOGGLE_TEXT)},s.default.createElement(b.Switch,null))),s.default.createElement(d.ButtonToolbar,null,s.default.createElement(d.Button,{bsSize:"large",bsStyle:"primary",disabled:n||r,type:"submit"},s.default.createElement(b.LoaderContainer,{isLoading:n},v?m.default.t(_.default.BUTTON_SAVE):m.default.t(_.default.BUTTON_ADD))),s.default.createElement(d.Button,{bsSize:"large",disabled:n,onClick:c},m.default.t(_.default.BUTTON_CANCEL))),p&&s.default.createElement("div",{className:"has-error"},s.default.createElement(d.HelpBlock,null,p)))}}]),n}(s.Component);N.propTypes={assetManager:v.default.object,handleSubmit:v.default.func,submitting:v.default.bool,invalid:v.default.bool,fields:v.default.object,onCancel:v.default.func,touch:v.default.func,error:v.default.string};t.default=(0,E.reduxForm)({getFormState:h.getFormState,form:"groupForm",fields:["id","name","imageUrl","subscribeByDefault"],validate:y.validateGroup})(N)},1394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"validateGroup",{enumerable:!0,get:function(){return r.validateGroup}});var r=n(1395)},1395:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.validateGroup=function(e){var t=e.name,n=e.imageUrl;return{name:u(t),imageUrl:u(n)}};var a=r(n(26)),o=r(n(1396));function u(e){return e?null:a.default.t(o.default.VALUE_REQUIRED_TEXT)}},1396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="".concat("groups-services",".value-required-text");t.default={VALUE_REQUIRED_TEXT:r}},1397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="group-form",a="".concat(r,".name-input-label"),o="".concat(r,".image-picker-label"),u="".concat(r,".image-help-text"),l="".concat(r,".subscribe-toggle-text"),i="".concat(r,".button-save"),c="".concat(r,".button-add"),f="".concat(r,".button-cancel");t.default={FORM_NAME_INPUT_DESCRIPTION:a,FORM_IMAGE_LABEL:o,FORM_IMAGE_HELP_TEXT:u,SUBSCRIBE_TOGGLE_TEXT:l,BUTTON_SAVE:i,BUTTON_ADD:c,BUTTON_CANCEL:f}},1398:function(e,t,n){},1399:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GroupNode",{enumerable:!0,get:function(){return a.default}});var a=r(n(1400))},1400:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(7)),u=r(n(8)),l=r(n(5)),i=r(n(9)),c=r(n(10)),f=r(n(11)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),d=n(17),p=r(n(18)),m=r(n(19)),v=r(n(0)),E=n(35);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}n(1401),(t.default=function(e){(0,i.default)(n,e);var t=h(n);function n(e){var r;return(0,o.default)(this,n),r=t.call(this,e),(0,p.default)((0,l.default)(r)),r}return(0,u.default)(n,[{key:"handleEditClick",value:function(){var e=this.props,t=e.id,n=e.onEditClick;m.default.isFunction(n)&&n(t)}},{key:"handlDeleteClick",value:function(){var e=this.props,t=e.id,n=e.onDeleteClick;m.default.isFunction(n)&&n(t)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.name,r=e.imageUrl;return s.default.createElement("div",{key:t,className:"group-node"},s.default.createElement("div",{className:"group-image-container"},s.default.createElement("img",{className:"group-image",alt:"group",src:r})),s.default.createElement("div",{className:"group-name"},n),s.default.createElement("div",{className:"group-actions"},s.default.createElement(d.Button,{className:"btn-icon",onClick:this.handleEditClick},s.default.createElement(E.FontIcon,{name:"edit",size:"24px"})),s.default.createElement(d.Button,{className:"btn-icon",onClick:this.handlDeleteClick},s.default.createElement(E.FontIcon,{name:"delete",size:"24px"}))))}}]),n}(s.Component)).propTypes={id:v.default.string,name:v.default.string,imageUrl:v.default.string,onEditClick:v.default.func,onDeleteClick:v.default.func}},1401:function(e,t,n){},1402:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GroupsDropdown",{enumerable:!0,get:function(){return a.default}});var a=r(n(1403))},1403:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(22)),u=r(n(27)),l=r(n(7)),i=r(n(8)),c=r(n(5)),f=r(n(9)),s=r(n(10)),d=r(n(11)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),m=r(n(18)),v=r(n(26)),E=r(n(19)),g=r(n(0)),h=n(63),b=n(35),y=r(n(1404)),_=["emptyText","selectedGroupIds","disabled","onSelectionChanged","showSelectNoneOption"];function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var N=t.default=function(e){(0,f.default)(n,e);var t=P(n);function n(e){var r;return(0,l.default)(this,n),r=t.call(this,e),(0,m.default)((0,c.default)(r)),r.state={groupOptions:null},r}return(0,i.default)(n,[{key:"componentWillMount",value:function(){this.checkData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"checkData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.groups,r=e.labelLengthLimit,a=e.groups;if(n!==a){var o=(0,h.createOptions)(a),u=E.default.map(o,(function(e){return{value:e.value,label:E.default.truncate(e.label,{length:r})}}));this.setState({groupOptions:u})}}},{key:"render",value:function(){var e=this.state.groupOptions,t=this.props,n=t.emptyText,r=t.selectedGroupIds,a=t.disabled,l=t.onSelectionChanged,i=t.showSelectNoneOption,c=(0,u.default)(t,_),f=n||v.default.t(y.default.DROPDOWN_PLACEHOLDER);return p.default.createElement(b.MultiselectDropdown,(0,o.default)({disabled:a,displayLabelMaxSelectedOptions:1,emptyText:f,onSelectionChanged:l,options:e,showSelectNoneOption:i,selectedValues:r},c))}}]),n}(p.Component);N.propTypes={name:g.default.string,error:g.default.string,selectedGroupIds:g.default.array,emptyText:g.default.string,groups:g.default.array,onSelectionChanged:g.default.func,disabled:g.default.bool,showSelectNoneOption:g.default.bool,labelLengthLimit:g.default.number},N.defaultProps={labelLengthLimit:40}},1404:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="".concat("groups-dropdown",".dropdown-placeholder");t.default={DROPDOWN_PLACEHOLDER:r}},1405:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Groups",{enumerable:!0,get:function(){return a.default}});var a=r(n(1406))},1406:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(141)),u=r(n(22)),l=r(n(14)),i=r(n(142)),c=r(n(7)),f=r(n(8)),s=r(n(5)),d=r(n(9)),p=r(n(10)),m=r(n(11)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),E=n(17),g=n(44),h=r(n(18)),b=r(n(26)),y=r(n(19)),_=r(n(0)),O=n(38),P=n(35),N=n(23),T=n(34),j=n(674),R=n(673),I=r(n(1407));function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,p.default)(this,n)}}n(1408);var D=function(e){(0,d.default)(l,e);var t,n,r,a=C(l);function l(e){var t;return(0,c.default)(this,l),t=a.call(this,e),(0,h.default)((0,s.default)(t)),t.confirmModal=(0,v.createRef)(),t.state={showGroupModal:!1,currentGroup:null,groups:null,tree:void 0},t}return(0,f.default)(l,[{key:"componentWillMount",value:function(){this.checkData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"checkData",value:(r=(0,i.default)(o.default.mark((function e(t){var n,r,a=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.length>1&&void 0!==a[1]?a[1]:{},r=t.appId,(0,N.shouldLoad)(t,n,"groups")&&this.handleLoadGroups(r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"handleLoadGroups",value:(n=(0,i.default)(o.default.mark((function e(t){var n,r,a,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.loadGroups,e.next=3,n(t);case 3:r=e.sent,a=y.default.get(r,"payload.data",[]),u=y.default.map(a,(function(e){return{id:e.id,name:e.name,imageUrl:e.imageUrl,isNestable:!1,isDraggable:!0,isRoot:!1,disableDrop:!1}})),this.setState({groups:a,tree:u});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleCreateGroupClick",value:function(){this.setState({showGroupModal:!0,currentGroup:null})}},{key:"handleHide",value:function(){this.setState({showGroupModal:!1,currentGroup:null})}},{key:"handleOnSelect",value:function(){}},{key:"handleEditClick",value:function(e){var t=this.state.groups,n=y.default.find(t,{id:e});this.setState({showGroupModal:!0,currentGroup:n})}},{key:"handleDeleteClick",value:function(e){var t=this.props,n=t.appId,r=t.deleteGroup,a=this.state.groups,o=y.default.find(a,{id:e}),u=y.default.get(o,"name");this.confirmModal.current.show({title:b.default.t(I.default.DELETE_MODAL_TITLE),message:b.default.t(I.default.DELETE_MODAL_MESSAGE,{groupName:u}),confirmLabel:b.default.t(I.default.DELETE_MODAL_CONFIRM_LABEL),abortLabel:b.default.t(I.default.CONFIRM_MODAL_ABORT_LABEL),confirmBsStyle:"danger",onConfirm:function(){return r(n,e)}})}},{key:"handleFormSubmit",value:(t=(0,i.default)(o.default.mark((function e(t){var n,r,a,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.appId,a=n.createGroup,u=n.updateGroup,!(l=y.default.get(t,"id"))){e.next=6;break}return e.next=5,u(r,l,t);case 5:return e.abrupt("return",this.handleHide());case 6:return e.next=8,a(r,t);case 8:return e.abrupt("return",this.handleHide());case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleOnDragAndDropComplete",value:function(e,t){var n=this.props,r=n.appId,a=n.updateGroup,o=this.state.groups;if(e&&t&&e.index!==t.index){var u=e.id;a(r,u,L(L({},y.default.find(o,{id:u})),{},{orderIndex:t.index}))}}},{key:"renderGroupNode",value:function(e){return v.default.createElement(j.GroupNode,(0,u.default)({},e,{onEditClick:this.handleEditClick,onDeleteClick:this.handleDeleteClick}))}},{key:"render",value:function(){var e=this.props,t=e.assetManager,n=e.groups,r=this.state,a=r.showGroupModal,o=r.groups,u=r.tree,l=r.currentGroup,i=!(0,T.isInitialized)(n)||(0,T.isBusy)(n),c=y.default.isEmpty(o);return v.default.createElement("div",{className:"groups"},v.default.createElement(P.LoaderContainer,{isOverlay:!0,isLoading:i},v.default.createElement("div",{className:"groups-table__title"},v.default.createElement("h3",null,b.default.t(I.default.LIST_TITLE)),v.default.createElement(E.Button,{className:"btn-icon pull-right",onClick:this.handleCreateGroupClick},v.default.createElement(P.IconLabel,{iconName:"add"},b.default.t(I.default.ADD_GROUP_LABEL)))),c&&v.default.createElement("div",{className:"groups-empty-placeholder"},b.default.t(I.default.GROUPS_EMPTY_TEXT)),v.default.createElement(P.NestedSortable,{showDragHandle:!0,className:"group-structure",tree:u,nodeHeaderTemplate:this.renderGroupNode,onSelect:this.handleOnSelect,onDragAndDropComplete:this.handleOnDragAndDropComplete}),a&&v.default.createElement(P.InlineModal,{className:"groups-page-modal",onHide:this.handleHide,title:b.default.t(I.default.ADD_GROUP_MODAL_TITLE)},v.default.createElement(j.GroupForm,{assetManager:t,initialValues:l,onCancel:this.handleHide,onSubmit:this.handleFormSubmit})),v.default.createElement(P.ConfirmModal,{className:"settings-page-modal-small",ref:this.confirmModal})))}}]),l}(v.Component);D.propTypes={appId:_.default.string,groups:_.default.array,assetManager:_.default.object,loadGroups:_.default.func,createGroup:_.default.func,updateGroup:_.default.func,deleteGroup:_.default.func};t.default=(0,g.connect)((function(e){return{groups:(0,R.getGroups)(e)}}),(function(e){return(0,O.bindActionCreators)({loadGroups:R.loadGroups,createGroup:R.createGroup,updateGroup:R.updateGroup,deleteGroup:R.deleteGroup},e)}))(D)},1407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="groups",a="".concat(r,".delete-modal-title"),o="".concat(r,".delete-modal-message"),u="".concat(r,".delete-modal-confirm-label"),l="".concat(r,".delete-modal-abort-label"),i="".concat(r,".list-title"),c="".concat(r,".add-group-label"),f="".concat(r,".groups-empty-text"),s="".concat(r,".add-group-modal-title");t.default={DELETE_MODAL_TITLE:a,DELETE_MODAL_MESSAGE:o,DELETE_MODAL_CONFIRM_LABEL:u,CONFIRM_MODAL_ABORT_LABEL:l,LIST_TITLE:i,ADD_GROUP_LABEL:c,GROUPS_EMPTY_TEXT:f,ADD_GROUP_MODAL_TITLE:s}},1408:function(e,t,n){},1409:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,n=t.type;if(n===o.SAVE_JOURNEY_TRIGGERS)return l(l({},e),{},{triggers:t.payload});return e};var a=r(n(14)),o=n(676);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i={triggers:[]}},1410:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getTriggers=t.getJourneys=t.getAvailableTriggers=void 0;var a=r(n(61)),o=r(n(19)),u=n(1411),l=n(51),i=r(n(33)),c=n(113);var f=t.getJourneys=(0,u.createSelector)([function(e){return(0,l.getExtension)(e,(0,i.default)())}],(function(e){return e.settings.journeys})),s=t.getTriggers=(0,u.createSelector)([function(e){return e[(0,i.default)()][c.moduleName]}],(function(e){return e.triggers}));t.getAvailableTriggers=(0,u.createSelector)([f,s,function(e,t){return t}],(function(e,t,n){if(!e)return t;var r=o.default.map(e,(function(e){return e.trigger.value})),u=o.default.filter(t,(function(e){return!o.default.includes(r,e.id)}));return n?[].concat((0,a.default)(u),[o.default.find(t,(function(e){return e.id===n}))]):u}))},1412:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JourneyForm",{enumerable:!0,get:function(){return r.JourneyForm}}),Object.defineProperty(t,"JourneysTable",{enumerable:!0,get:function(){return a.JourneysTable}});var r=n(1413),a=n(1426)},1413:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JourneyForm",{enumerable:!0,get:function(){return a.default}});var a=r(n(1414))},1414:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=j;var o=r(n(14)),u=r(n(61)),l=r(n(56)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),c=n(17),f=n(44),s=r(n(206)),d=r(n(26)),p=r(n(19)),m=r(n(0)),v=n(35),E=n(51),g=r(n(33)),h=n(1415),b=n(113),y=n(327),_=r(n(1424));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t){return e!==t&&!p.default.isEmpty(e)}function j(e){var t=e.initialValues,n=e.onSubmit,r=e.isEdit,a=(0,f.useDispatch)(),o=(0,f.useSelector)((function(e){return(0,E.getExtension)(e,(0,g.default)())})),m=(0,f.useSelector)(E.getShortcuts),b=(0,f.useSelector)((function(e){var n;return(0,y.getAvailableTriggers)(e,null===(n=t.trigger)||void 0===n?void 0:n.value)})),O=(0,i.useState)(t.title),P=(0,l.default)(O,2),j=P[0],R=P[1],I=(0,i.useState)(t.trigger),S=(0,l.default)(I,2),A=S[0],L=S[1],C=(0,i.useState)(t.notifications),D=(0,l.default)(C,2),M=D[0],w=D[1],U=(0,i.useState)(!1),k=(0,l.default)(U,2),G=k[0],B=k[1],F=(0,i.useState)(!0),x=(0,l.default)(F,2),Y=x[0],V=x[1],W=(0,i.useMemo)((function(){return!!j&&!!A.value&&p.default.every(M,(function(e){return!!e.title&&!!e.body}))}),[j,A,M]),H=(0,i.useMemo)((function(){return G&&!Y&&W}),[G,Y,W]),z=(0,i.useMemo)((function(){return b.map((function(e){return{value:e.id,label:e.attributes.name}}))}),[b]);function J(e,t){var n=(0,u.default)(M);n[t]=N(N({},M[t]),e),B(T(n,M)),w(n)}function q(e){var t=(0,u.default)(M);t.splice(e,1),B(T(t,M)),w(t)}return(0,i.useEffect)((function(){a((0,E.fetchShortcuts)()).then((function(){return V(!1)}))}),[a]),i.default.createElement(v.LoaderContainer,{isLoading:Y,className:"journey-form__container"},i.default.createElement(c.FormGroup,null,i.default.createElement(c.ControlLabel,null,d.default.t(_.default.JOURNEY_TITLE)),i.default.createElement(c.FormControl,{className:"form-control",type:"text",onChange:function(e){var t=e.target.value;return B(T(t,j)),R(t)},value:j})),i.default.createElement(c.FormGroup,{controlId:"trigger"},i.default.createElement(c.ControlLabel,null,d.default.t(_.default.TRIGGER_LABEL)),i.default.createElement(s.default,{clearable:!1,elementId:"trigger",name:"trigger",onChange:function(e){return B(T(e,A)),L(e)},noResultsText:d.default.t(_.default.NO_AVAILABLE_TRIGGERS),options:z,value:null==A?void 0:A.value})),i.default.createElement("div",{className:"journey-form__add-new-notification"},i.default.createElement(c.Button,{className:"btn-icon pull-right",onClick:function(){w((function(e){return[].concat((0,u.default)(e),[{}])}))}},i.default.createElement(v.IconLabel,{iconName:"add"},d.default.t(_.default.ADD_NEW_NOTIFICATION)))),p.default.map(M,(function(e,t){return i.default.createElement(h.NotificationInput,{shortcuts:m,shortcutId:null==e?void 0:e.shortcutId,delay:null==e?void 0:e.delay,key:t,index:t,body:null==e?void 0:e.body,title:null==e?void 0:e.title,target:null==e?void 0:e.target,contentUrl:null==e?void 0:e.contentUrl,onValueChange:J,onDelete:q})})),i.default.createElement(c.ButtonToolbar,null,i.default.createElement(c.Button,{bsStyle:"primary",disabled:!H,onClick:function(){V(!0);var e=p.default.get(o,"settings.journeys",[]);if(t.key&&p.default.find(e,["key",t.key])){var r=p.default.findIndex(e,["key",t.key]);e[r]=N(N({},e[r]),{},{title:j,trigger:A,notifications:M,active:!0})}else e.push({title:j,id:A.value,key:"".concat(j,"-").concat(Date.now()),trigger:A,notifications:M,active:!0});return a((0,E.updateExtensionSettings)(o,N(N({},o.settings),{},{journeys:e}))).then(n).finally((function(){return V(!1)}))}},i.default.createElement(v.LoaderContainer,{isLoading:Y},d.default.t(_.default.SAVE_BUTTON)))),r&&i.default.createElement(c.HelpBlock,{className:"journey-form__warning-text"},d.default.t(_.default.UPDATE_WARNING)))}n(1425),j.propTypes={onSubmit:m.default.func.isRequired,initialValues:m.default.shape({id:m.default.string,key:m.default.string,notifications:m.default.array,title:m.default.string,trigger:m.default.shape({label:m.default.string,value:m.default.string})}),isEdit:m.default.bool},j.defaultProps={initialValues:{notifications:[b.DEFAULT_JOURNEY_NOTIFICATION],title:"",trigger:{label:"",value:""}},isEdit:!1}},1415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationInput",{enumerable:!0,get:function(){return r.NotificationInput}});var r=n(1416)},1416:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationInput",{enumerable:!0,get:function(){return a.default}});var a=r(n(1417))},1417:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=b;var o=r(n(14)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),l=n(17),i=r(n(206)),c=r(n(26)),f=r(n(0)),s=n(35),d=n(677),p=n(113),m=n(1420),v=n(1422),E=r(n(678));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){var t=e.shortcuts,n=e.delay,r=e.index,a=e.body,o=e.title,f=e.target,p=e.contentUrl,g=e.shortcutId,h=e.onValueChange,b=e.onDelete,y=(0,u.useMemo)((function(){return(0,v.getTargetOptions)()}),[]),_=(0,u.useMemo)((function(){return(0,v.getDelayOptions)()}),[]),O=(0,u.useMemo)((function(){return f.value===y[1].value}),[f.value,y]),P=(0,u.useMemo)((function(){return n||_[0].value}),[n,_]),N=(0,u.useMemo)((function(){return 0!==r}),[r]);return u.default.createElement(u.default.Fragment,null,u.default.createElement("h4",{className:"notification-input__title"},c.default.t(E.default.NOTIFICATION_INPUT_TITLE,{index:r+1})),N&&u.default.createElement("div",{className:"notification-input__delete"},u.default.createElement(l.Button,{className:"btn-icon pull-right",onClick:function(e){e.stopPropagation(),b(r)}},u.default.createElement(s.FontIcon,{name:"delete",size:"24px"}))),u.default.createElement(l.FormGroup,null,u.default.createElement(l.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_DELAY_LABEL)),u.default.createElement(i.default,{clearable:!1,name:"delay",onChange:function(e){return h({delay:e.value},r)},options:_,value:P})),u.default.createElement(l.FormGroup,null,u.default.createElement(l.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_TITLE_LABEL)),u.default.createElement(l.FormControl,{className:"form-control",type:"text",onChange:function(e){var t=e.target.value;return h({title:t},r)},value:o})),u.default.createElement(l.FormGroup,null,u.default.createElement(l.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_BODY_LABEL)),u.default.createElement(l.FormControl,{className:"form-control",type:"text",onChange:function(e){var t=e.target.value;return h({body:t},r)},value:a})),u.default.createElement(l.Row,null,u.default.createElement(l.Col,{xs:5},u.default.createElement(l.FormGroup,{controlId:"target"},u.default.createElement(l.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_TARGET_LABEL)),u.default.createElement(i.default,{clearable:!1,elementId:"target",name:"target",onChange:function(e){if(e===y[0]&&p){var t=(0,m.getNotificationAction)({target:y[0].value,contentUrl:p,title:o});return h({target:e,action:t},r)}if(e===y[1]&&g){var n=(0,m.getNotificationAction)({target:y[1].value,shortcutId:g});return h({target:e,action:n},r)}return h({target:e,action:""},r)},options:y,value:null==f?void 0:f.value}))),u.default.createElement(l.Col,{xs:7},u.default.createElement(l.FormGroup,null,!O&&u.default.createElement(u.default.Fragment,null,u.default.createElement(l.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_CONTENT_URL_LABEL)),u.default.createElement(l.FormControl,{className:"form-control",type:"text",onChange:function(e){var t=e.target.value,n=(0,m.getNotificationAction)({target:y[0].value,contentUrl:t,title:o});return h({target:y[0],contentUrl:t,action:n},r)},value:p})),O&&u.default.createElement(u.default.Fragment,null,u.default.createElement(l.ControlLabel,null,c.default.t(E.default.NOTIFICATION_INPUT_CONTENT_SHORTCUT_LABEL)),u.default.createElement(d.ShortcutsDropdown,{shortcuts:t,shortcut:g,onChange:function(e){var t=(0,m.getNotificationAction)({target:y[1].value,shortcutId:e});return h({target:y[1],shortcutId:e,action:t},r)}}))))))}n(1423),b.propTypes={index:f.default.number.isRequired,shortcuts:f.default.array.isRequired,onDelete:f.default.func.isRequired,onValueChange:f.default.func.isRequired,body:f.default.string,contentUrl:f.default.string,delay:f.default.number,shortcutId:f.default.string,target:f.default.object,title:f.default.string},b.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},p.DEFAULT_JOURNEY_NOTIFICATION)},1418:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(22)),u=r(n(27)),l=r(n(7)),i=r(n(8)),c=r(n(5)),f=r(n(9)),s=r(n(10)),d=r(n(11)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),m=r(n(206)),v=r(n(18)),E=r(n(26)),g=r(n(19)),h=r(n(0)),b=n(63),y=r(n(1419)),_=["shortcut"];function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}(t.default=function(e){(0,f.default)(n,e);var t=P(n);function n(e){var r;return(0,l.default)(this,n),r=t.call(this,e),(0,v.default)((0,c.default)(r)),r.state={shortcutOptions:null},r}return(0,i.default)(n,[{key:"componentWillMount",value:function(){this.checkData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"checkData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.shortcuts,r=e.shortcuts;if(n!==r){var a=(0,b.buildShortcutTree)(r),o=(0,b.createOptions)(a,"shortcut.key","shortcut.title",["level"]);this.setState({shortcutOptions:o})}}},{key:"handleBlur",value:function(){var e=this.props,t=e.onBlur,n=e.shortcut;g.default.isFunction(t)&&t(n)}},{key:"handleOnChange",value:function(e){var t=this.props.onChange,n=g.default.get(e,"value");g.default.isFunction(t)&&t(n)}},{key:"renderOption",value:function(e){var t=20*e.level+8,n={paddingLeft:"".concat(t,"px")};return p.default.createElement("span",{style:n},e.label)}},{key:"render",value:function(){var e=this.props,t=e.shortcut,n=(0,u.default)(e,_),r=this.state.shortcutOptions;return p.default.createElement(m.default,(0,o.default)({},n,{name:"shortcut",clearable:!1,placeholder:E.default.t(y.default.DROPDOWN_PLACEHOLDER),value:t,options:r,onBlur:this.handleBlur,onChange:this.handleOnChange,optionRenderer:this.renderOption}))}}]),n}(p.Component)).propTypes={shortcut:h.default.string,shortcuts:h.default.array,onChange:h.default.func,onBlur:h.default.func}},1419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="".concat("shortcuts-dropdown",".dropdown-placeholder");t.default={DROPDOWN_PLACEHOLDER:r}},1420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getNotificationAction",{enumerable:!0,get:function(){return r.getNotificationAction}});var r=n(1421)},1421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNotificationAction=function(e){if(e.target===r.TARGET_VALUES.URL){var t={route:{key:"push-".concat((new Date).getTime().toString()),screen:"shoutem.web-view.WebViewScreen",props:{url:e.contentUrl,title:e.title,showNavigationToolbar:!0}},type:a};return JSON.stringify(t)}if(e.target===r.TARGET_VALUES.SCREEN){var n={type:o,navigationAction:"shoutem.navigation.OPEN_MODAL",shortcutId:e.shortcutId};return JSON.stringify(n)}return null};var r=n(113),a="shoutem.navigation.OPEN_MODAL",o="shoutem.application.EXECUTE_SHORTCUT"},1422:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getDelayOptions=function(){return[{label:"1 ".concat(a.default.t(u.default.NOTIFICATION_INPUT_MINUTE_LABEL)),value:1},{label:"5 ".concat(a.default.t(u.default.NOTIFICATION_INPUT_MINUTES_LABEL)),value:5},{label:"15 ".concat(a.default.t(u.default.NOTIFICATION_INPUT_MINUTES_LABEL)),value:15},{label:"30 ".concat(a.default.t(u.default.NOTIFICATION_INPUT_MINUTES_LABEL)),value:30},{label:"1 ".concat(a.default.t(u.default.NOTIFICATION_INPUT_HOUR_LABEL)),value:60},{label:"1 ".concat(a.default.t(u.default.NOTIFICATION_INPUT_DAY_LABEL)),value:1440},{label:"7 ".concat(a.default.t(u.default.NOTIFICATION_INPUT_DAYS_LABEL)),value:10080},{label:"30 ".concat(a.default.t(u.default.NOTIFICATION_INPUT_DAYS_LABEL)),value:43200}]},t.getTargetOptions=function(){return[{value:o.TARGET_VALUES.URL,label:a.default.t(u.default.NOTIFICATION_INPUT_TARGET_URL)},{value:o.TARGET_VALUES.SCREEN,label:a.default.t(u.default.NOTIFICATION_INPUT_TARGET_SCREEN)}]};var a=r(n(26)),o=n(113),u=r(n(678))},1423:function(e,t,n){},1424:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={ADD_NEW_NOTIFICATION:"journey-form-add-new-notification",FIELD_REQUIRED:"journey-form-field-required",JOURNEY_TITLE:"journey-form-title-label",SAVE_BUTTON:"journey-form-save",TRIGGER_LABEL:"journey-form-trigger-label",UPDATE_WARNING:"journey-form-update-warning",NO_AVAILABLE_TRIGGERS:"journey-form-no-available-triggers"}},1425:function(e,t,n){},1426:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JourneysTable",{enumerable:!0,get:function(){return a.default}});var a=r(n(1427))},1427:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=y;var o=r(n(14)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),l=n(17),i=n(44),c=r(n(26)),f=r(n(19)),s=r(n(0)),d=n(35),p=n(51),m=r(n(33)),v=n(327),E=r(n(1428));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=e.onAddClick,n=e.onEditClick,r=e.onRowClick,a=(0,i.useDispatch)(),o=(0,i.useSelector)((function(e){return(0,p.getExtension)(e,(0,m.default)())})),s=(0,i.useSelector)(v.getJourneys);function g(e){return f.default.get(e,"active",!1)?u.default.createElement(l.Button,{className:"btn-icon pull-right",onClick:function(){return n(e)}},u.default.createElement(d.FontIcon,{name:"edit",size:"24px"})):null}var h=(0,u.useCallback)((function(e){var t=f.default.filter(o.settings.journeys,(function(t){return t.id!==e.id}));a((0,p.updateExtensionSettings)(o,b(b({},o.settings),{},{journeys:t})))}),[a,o]);function y(e){return u.default.createElement(l.Button,{className:"btn-icon pull-right",onClick:function(t){t.stopPropagation(),h(e)}},u.default.createElement(d.FontIcon,{name:"delete",size:"24px"}))}return u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:"journeys-table__title-row"},u.default.createElement("h3",null,c.default.t(E.default.JOURNEYS_TITLE)),u.default.createElement(l.Button,{className:"btn-icon pull-right",onClick:t},u.default.createElement(d.IconLabel,{iconName:"add"},c.default.t(E.default.ADD_NEW_JOURNEY)))),u.default.createElement(d.EditableTable,{isStatic:!0,canUpdate:!1,canDelete:!1,className:"journeys-table",emptyStateText:c.default.t(E.default.NO_JOURNEYS_TEXT),headers:[c.default.t(E.default.TABLE_TITLE),"",""],rowDescriptors:[{property:"title",isRequired:!0},{getDisplayValue:g,isRequired:!1},{getDisplayValue:y,isRequired:!1}],rows:s,onRowClick:r}))}n(1429),y.propTypes={onAddClick:s.default.func.isRequired,onEditClick:s.default.func.isRequired,onRowClick:s.default.func.isRequired}},1428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={ADD_NEW_JOURNEY:"journeys-table-add-new",JOURNEYS_TITLE:"journeys-title",NO_JOURNEYS_TEXT:"journeys-table-no-journeys-placeholder",TABLE_TITLE:"journeys-table-title"}},1429:function(e,t,n){},1430:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.createNotification=function(e,t){return function(n){var r={schema:i.NOTIFICATIONS,request:{endpoint:u.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/ScheduledNotification")),method:"POST",headers:{Accept:"application/vnd.api+json"},body:JSON.stringify(t)}};return n((0,l.find)(r,(0,o.default)("notificationsPage-create"))).then((function(){n((0,l.invalidate)(i.NOTIFICATIONS))}))}},t.deleteNotification=function(e,t){return function(n){var r={schema:i.NOTIFICATIONS,request:{endpoint:u.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/ScheduledNotification/").concat(t)),method:"DELETE",headers:{Accept:"application/vnd.api+json"}}};return n((0,l.find)(r,(0,o.default)("notificationsPage-delete"))).then((function(){n((0,l.invalidate)(i.NOTIFICATIONS))}))}},t.loadNotifications=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r={q:{limit:n,offset:t,type:"Manual"}},a={schema:i.NOTIFICATIONS,request:{endpoint:u.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/ScheduledNotification{?q*}")),headers:{Accept:"application/vnd.api+json"}}};return(0,l.find)(a,(0,o.default)("notificationsPage"),r)},t.updateNotification=function(e,t,n){return function(r){var f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t},n),s={schema:i.NOTIFICATIONS,request:{endpoint:u.shoutemUrls.legacyApi("".concat(e,"/notifications/objects/ScheduledNotification/").concat(t)),method:"POST",headers:{Accept:"application/vnd.api+json"},body:JSON.stringify(f)}};return r((0,l.find)(s,(0,o.default)("notificationsPage-update"))).then((function(){r((0,l.invalidate)(i.NOTIFICATIONS))}))}};var a=r(n(14)),o=r(n(33)),u=n(63),l=n(23),i=n(55);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}},1431:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;var a,o=r(n(14)),u=n(38),l=r(n(33)),i=n(23),c=n(55);t.reducer=(0,u.combineReducers)((a={},(0,o.default)(a,c.NOTIFICATIONS,(0,i.storage)(c.NOTIFICATIONS)),(0,o.default)(a,"notifications",(0,i.collection)(c.NOTIFICATIONS,(0,l.default)("notificationsPage"))),(0,o.default)(a,"rawNotifications",(0,i.resource)(c.NOTIFICATIONS)),a))},1432:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.getNotifications=function(e){var t=l(e).notifications;return(0,o.getCollection)(t,e)},t.getRawNotifications=function(e){return l(e).rawNotifications};var a=r(n(33)),o=n(23),u=n(55);function l(e){return e[(0,a.default)()][u.moduleName]}},1433:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Notifications",{enumerable:!0,get:function(){return a.default}});var a=r(n(1434))},1434:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(141)),u=r(n(142)),l=r(n(7)),i=r(n(8)),c=r(n(5)),f=r(n(9)),s=r(n(10)),d=r(n(11)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=L(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),m=n(44),v=r(n(18)),E=r(n(26)),g=r(n(19)),h=r(n(0)),b=n(38),y=n(17),_=n(35),O=n(51),P=n(23),N=n(34),T=n(204),j=n(1435),R=n(55),I=n(680),S=n(681),A=r(n(1454));function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(L=function(e){return e?n:t})(e)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}n(1455);var D={target:R.TARGET_TYPES.APP,audience:R.AUDIENCE_TYPES.ALL,delivery:R.DELIVERY_TYPES.NOW,recurringPeriod:R.RECURRING_PERIOD_TYPES.NONE,summaries:[]},M=function(e){(0,f.default)(r,e);var t,n=C(r);function r(e){var t;return(0,l.default)(this,r),t=n.call(this,e),(0,v.default)((0,c.default)(t)),t.confirmModal=(0,p.createRef)(),t.state={showNotificationModal:!1,showNotificationInfoModal:!1,currentNotification:null},t}return(0,i.default)(r,[{key:"componentWillMount",value:function(){this.checkData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"checkData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.appId,r=e.fetchShortcuts,a=e.fetchModules,o=e.loadGroups;(0,P.shouldLoad)(e,t,"notifications")&&(this.handleLoadNotifications(n,0),o(n)),(0,P.shouldLoad)(e,t,"groups")&&o(n),(0,P.shouldLoad)(e,t,"shortcuts")&&r(),(0,P.shouldLoad)(e,t,"modules")&&a()}},{key:"handleLoadNotifications",value:function(e,t,n){return(0,this.props.loadNotifications)(e,t,n)}},{key:"handleCreateNotificationClick",value:function(){var e=this.props.onModalShown;this.setState({currentNotification:null,showNotificationModal:!0,showNotificationInfoModal:!1}),e(!0)}},{key:"handleHideNotificationModal",value:function(){var e=this.props.onModalShown;this.setState({currentNotification:null,showNotificationModal:!1,showNotificationInfoModal:!1}),e(!1)}},{key:"handleHideNotificationInfoModal",value:function(){this.setState({currentNotification:null,showNotificationModal:!1,showNotificationInfoModal:!1})}},{key:"handleNextPageClick",value:function(){var e=this.props,t=e.appId,n=e.notifications,r=e.rawNotifications;if(!(0,N.isBusy)(n)){var a=g.default.get(r,"paging.pageLimit"),o=g.default.get(r,"paging.page",0)*a+a;this.handleLoadNotifications(t,o)}}},{key:"handlePreviousPageClick",value:function(){var e=this.props,t=e.appId,n=e.notifications,r=e.rawNotifications;if(!(0,N.isBusy)(n)){var a=g.default.get(r,"paging.pageLimit"),o=g.default.get(r,"paging.page",0)*a-a;this.handleLoadNotifications(t,o)}}},{key:"handleEditClick",value:function(e){var t=this.props.onModalShown,n=(0,S.mapModelToView)(e);this.setState({currentNotification:n,showNotificationModal:!0}),t(!0)}},{key:"handleInfoClick",value:function(e){var t=this.props.onModalShown,n=(0,S.mapModelToView)(e);this.setState({currentNotification:n,showNotificationInfoModal:!0}),t(!0)}},{key:"handleDeleteClick",value:function(e){var t=this.props,n=t.appId,r=t.deleteNotification,a=g.default.get(e,"id");this.confirmModal.current.show({title:E.default.t(A.default.CONFIRM_MODAL_TITLE),message:E.default.t(A.default.CONFIRM_MODAL_MESSAGE),confirmLabel:E.default.t(A.default.CONFIRM_MODAL_CONFIRM_LABEL),abortLabel:E.default.t(A.default.CONFIRM_MODAL_ABORT_LABEL),confirmBsStyle:"danger",onConfirm:function(){return r(n,a)}})}},{key:"handleRowClick",value:function(e){return g.default.get(e,"active")?this.handleEditClick(e):this.handleInfoClick(e)}},{key:"handleShowAlert",value:function(e){var t=this.props.showAlert;g.default.get(e,"delivery")!==R.DELIVERY_TYPES.SCHEDULED?t(E.default.t(A.default.ALERT_SENT_TEXT)):t(E.default.t(A.default.ALERT_SCHEDULED_TEXT))}},{key:"handleFormSubmit",value:(t=(0,u.default)(o.default.mark((function e(t){var n,r,a,u,l,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.appId,a=n.createNotification,u=n.updateNotification,l=g.default.get(t,"id"),i=(0,S.mapViewToModel)(t),!l){e.next=8;break}return e.next=6,u(r,l,i);case 6:return this.handleShowAlert(t),e.abrupt("return",this.handleHideNotificationModal());case 8:return e.next=10,a(r,i);case 10:return this.handleShowAlert(t),e.abrupt("return",this.handleHideNotificationModal());case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleToggleRecurringFeature",value:function(){var e=this.props.modules,t=g.default.find(e,{name:R.RECURRING_FEATURE});return t?this.props.removeModule(t):this.props.createModule({name:R.RECURRING_FEATURE})}},{key:"resolveHasNext",value:function(){var e=this.props.rawNotifications,t=g.default.get(e,"paging.pageLimit");return g.default.get(e,"data",[]).length>=t}},{key:"resolveHasPrev",value:function(){var e=this.props.rawNotifications;return g.default.get(e,"paging.page",0)>0}},{key:"resolveCurrentNotification",value:function(){var e=this.state.currentNotification;if("Silent"===(null==e?void 0:e.type)){var t=g.default.cloneDeep(e);return g.default.set(t,"delivery",R.DELIVERY_TYPES.USER_SCHEDULED),g.default.set(t,"summary",""),t}if(e&&void 0===e.target){var n=g.default.cloneDeep(e);return g.default.set(n,"target",R.TARGET_TYPES.APP),n}return e||D}},{key:"renderNotificationModal",value:function(){var e=this.props,t=e.shortcuts,n=e.rawGroups,r=e.settings,a=e.modules,o=this.state.currentNotification,u=g.default.find(a,{name:R.RECURRING_FEATURE}),l=g.default.get(n,"data",[]),i=this.resolveCurrentNotification(),c=!!g.default.get(o,"id"),f=c?E.default.t(A.default.TITLE_EDIT_PUSH_NOTIFICATION_TEXT):E.default.t(A.default.TITLE_NEW_PUSH_NOTIFICATION_TEXT);return p.default.createElement("div",{className:"notifications-modal"},p.default.createElement("div",{className:"notifications-modal-title-container"},p.default.createElement(y.Button,{className:"btn-icon pull-left",onClick:this.handleHideNotificationModal},p.default.createElement(_.FontIcon,{name:"back",size:"24px"})),p.default.createElement("h3",{className:"notifications-modal-title"},f)),p.default.createElement(j.NotificationForm,{isEdit:c,groups:l,shortcuts:t,onSubmit:this.handleFormSubmit,onCancel:this.handleHideNotificationModal,initialValues:i,settings:r,recurringEnabled:u,toogleRecurringFeature:this.handleToggleRecurringFeature}))}},{key:"renderNotificationInfoModal",value:function(){var e=this.props.shortcuts,t=this.state.currentNotification;return p.default.createElement("div",{className:"notifications-modal"},p.default.createElement("div",{className:"notifications-modal-title-container"},p.default.createElement(y.Button,{className:"btn-icon pull-left",onClick:this.handleHideNotificationModal},p.default.createElement(_.FontIcon,{name:"back",size:"24px"})),p.default.createElement("h3",{className:"notifications-modal-title"},E.default.t(A.default.INLINE_MODAL_TITLE))),p.default.createElement(j.NotificationInfoForm,{shortcuts:e,notification:t,onCancel:this.handleHideNotificationInfoModal}))}},{key:"render",value:function(){var e=this.props,t=e.notifications,n=e.rawNotifications,r=this.state,a=r.showNotificationModal,o=r.showNotificationInfoModal,u=!(0,N.isInitialized)(t)||(0,N.isBusy)(t),l=g.default.get(n,"data",[]);return p.default.createElement("div",{className:"notifications"},p.default.createElement(_.LoaderContainer,{isOverlay:!0,isLoading:u},!a&&!o&&p.default.createElement(p.default.Fragment,null,p.default.createElement(j.NotificationsTable,{notifications:l,onRowClick:this.handleRowClick,onAddClick:this.handleCreateNotificationClick,onDeleteClick:this.handleDeleteClick,onEditClick:this.handleEditClick}),p.default.createElement(_.Paging,{ref:"paging",hasNext:this.resolveHasNext(),hasPrevious:this.resolveHasPrev(),onNextPageClick:this.handleNextPageClick,onPreviousPageClick:this.handlePreviousPageClick})),a&&this.renderNotificationModal(),o&&this.renderNotificationInfoModal()),p.default.createElement(_.ConfirmModal,{className:"settings-page-modal-small",ref:this.confirmModal}))}}]),r}(p.Component);M.propTypes={appId:h.default.string,notifications:h.default.array,rawNotifications:h.default.object,groups:h.default.array,rawGroups:h.default.object,shortcuts:h.default.array,modules:h.default.array,loadNotifications:h.default.func,createNotification:h.default.func,updateNotification:h.default.func,deleteNotification:h.default.func,loadGroups:h.default.func,fetchShortcuts:h.default.func,fetchModules:h.default.func,createModule:h.default.func,removeModule:h.default.func,showAlert:h.default.func,onModalShown:h.default.func,settings:h.default.object};t.default=(0,m.connect)((function(e){return{notifications:(0,I.getNotifications)(e),rawNotifications:(0,I.getRawNotifications)(e),groups:(0,T.getGroups)(e),rawGroups:(0,T.getRawGroups)(e),shortcuts:(0,O.getShortcuts)(e),modules:(0,O.getModules)(e)}}),(function(e){return(0,b.bindActionCreators)({loadNotifications:I.loadNotifications,createNotification:I.createNotification,updateNotification:I.updateNotification,deleteNotification:I.deleteNotification,loadGroups:T.loadGroups,fetchShortcuts:O.fetchShortcuts,fetchModules:O.fetchModules,createModule:O.createModule,removeModule:O.removeModule},e)}))(M)},1435:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationForm",{enumerable:!0,get:function(){return r.NotificationForm}}),Object.defineProperty(t,"NotificationInfoForm",{enumerable:!0,get:function(){return a.NotificationInfoForm}}),Object.defineProperty(t,"NotificationsTable",{enumerable:!0,get:function(){return o.NotificationsTable}}),Object.defineProperty(t,"SummaryFields",{enumerable:!0,get:function(){return u.SummaryFields}});var r=n(1436),a=n(1446),o=n(1450),u=n(682)},1436:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationForm",{enumerable:!0,get:function(){return a.default}});var a=r(n(1437))},1437:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(22)),u=r(n(7)),l=r(n(8)),i=r(n(5)),c=r(n(9)),f=r(n(10)),s=r(n(11)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),p=n(17),m=r(n(206)),v=r(n(18)),E=r(n(26)),g=r(n(19)),h=r(n(0)),b=n(318),y=n(200),_=n(35),O=n(204),P=n(55),N=n(681),T=n(677),j=n(682),R=r(n(1444));function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}n(1445);var A=function(e){(0,c.default)(n,e);var t=S(n);function n(e){var r,a;return(0,u.default)(this,n),a=t.call(this,e),(0,v.default)((0,i.default)(a)),a.TARGET_OPTIONS=[{value:P.TARGET_TYPES.APP,label:E.default.t(R.default.TARGET_APP_LABEL)},{value:P.TARGET_TYPES.URL,label:E.default.t(R.default.TARGET_URL_LABEL)},{value:P.TARGET_TYPES.SCREEN,label:E.default.t(R.default.TARGET_SCREEN_LABEL)}],a.AUDIENCE_OPTIONS=[{value:P.AUDIENCE_TYPES.ALL,label:E.default.t(R.default.AUDIENCE_ALL_LABEL)},{value:P.AUDIENCE_TYPES.GROUP,label:E.default.t(R.default.AUDIENCE_GROUP_LABEL)}],a.DELIVERY_OPTIONS=[{value:P.DELIVERY_TYPES.NOW,label:E.default.t(R.default.DELIVERY_NOW_LABEL)},{value:P.DELIVERY_TYPES.SCHEDULED,label:E.default.t(R.default.DELIVERY_SCHEDULED_LABEL)}],a.RECURRING_PERIOD_OPTIONS=[{value:P.RECURRING_PERIOD_TYPES.NONE,label:E.default.t(R.default.RECURRING_PERIOD_NONE)},{value:P.RECURRING_PERIOD_TYPES.EVERY_DAY,label:E.default.t(R.default.RECURRING_PERIOD_EVERY_DAY)},{value:P.RECURRING_PERIOD_TYPES.EVERY_7_DAYS,label:E.default.t(R.default.RECURRING_PERIOD_EVERY_7_DAYS)},{value:P.RECURRING_PERIOD_TYPES.EVERY_30_DAYS,label:E.default.t(R.default.RECURRING_PERIOD_EVERY_30_DAYS)}],null!==(r=e.settings)&&void 0!==r&&r.scheduledNotificationsEnabled&&a.DELIVERY_OPTIONS.push({value:P.DELIVERY_TYPES.USER_SCHEDULED,label:E.default.t(R.default.DELIVERY_USER_SCHEDULED_LABEL)}),a}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fields,n=t.delivery,r=t.summaries;e.isEdit||n.value!==P.DELIVERY_TYPES.USER_SCHEDULED||r.onChange([""])}},{key:"handleTargetChanged",value:function(e){var t=this.props.fields.target,n=g.default.get(e,"value");t.onChange(n)}},{key:"handleAudienceGroupsChange",value:function(e){var t=this.props,n=t.touch;t.fields.audienceGroupIds.onChange(e),n("audienceGroupIds")}},{key:"handleAudienceGroupsTouched",value:function(e){var t=this.props.touch;e||t("audienceGroupIds")}},{key:"handleAudienceSelect",value:function(e){this.props.fields.audience.onChange(e)}},{key:"handleDeliverySelect",value:function(e){var t=this.props,n=t.fields,r=n.delivery,a=n.summaries,o=(n.target,t.isEdit),u=t.touch;e.value===P.DELIVERY_TYPES.USER_SCHEDULED&&r.value!==P.DELIVERY_TYPES.USER_SCHEDULED&&(a.onChange([""]),o&&u("numberOfMessages")),e.value!==P.DELIVERY_TYPES.USER_SCHEDULED&&a.onChange([]),r.onChange(e.value)}},{key:"handleRecurringPeriodSelect",value:function(e){this.props.fields.recurringPeriod.onChange(e.value)}},{key:"handleSummariesChange",value:function(){(0,this.props.touch)("numberOfMessages")}},{key:"render",value:function(){var e=this.props,t=e.groups,n=e.shortcuts,r=e.submitting,a=e.invalid,u=e.recurringEnabled,l=e.fields,i=e.fields,c=i.id,f=i.target,s=i.contentUrl,v=i.shortcutId,g=i.audience,h=i.audienceGroupIds,b=i.title,y=i.summary,N=i.numberOfMessages,I=i.delivery,S=i.deliveryTime,A=i.recurringPeriod,L=e.onCancel,C=e.handleSubmit,D=e.error,M=!!c.value,w=g.value===P.AUDIENCE_TYPES.ALL,U=I.value===P.DELIVERY_TYPES.NOW,k=I.value!==P.DELIVERY_TYPES.USER_SCHEDULED,G=I.value!==P.DELIVERY_TYPES.USER_SCHEDULED,B=f.value===P.TARGET_TYPES.URL,F=f.value===P.TARGET_TYPES.SCREEN,x=I.value!==P.DELIVERY_TYPES.USER_SCHEDULED&&P.DISPLAY_TIME_FORMAT;return d.default.createElement("form",{className:"notification-form",onSubmit:C},d.default.createElement(p.Row,null,d.default.createElement(p.Col,{xs:5},d.default.createElement(p.FormGroup,{controlId:"audience"},d.default.createElement(p.ControlLabel,null,E.default.t(R.default.AUDIENCE_LABEL)),d.default.createElement(_.RadioSelector,{className:"notification-form__radio-selector",groupName:"audience",options:this.AUDIENCE_OPTIONS,activeValue:g.value,onSelect:this.handleAudienceSelect}))),d.default.createElement(p.Col,{xs:7,className:"notification-form__select"},d.default.createElement(_.ReduxFormElement,{disabled:r||w,elementId:"audienceGroupIds",field:h},d.default.createElement(O.GroupsDropdown,{className:"notification-form__groups",onSelectionChanged:this.handleAudienceGroupsChange,onToggle:this.handleAudienceGroupsTouched,selectedGroupIds:h.value,groups:t})))),d.default.createElement(p.Row,null,d.default.createElement(p.Col,{xs:5},d.default.createElement(p.FormGroup,{className:"recurring-switch-group",controlId:"recurring-switch"},d.default.createElement(p.ControlLabel,null,E.default.t(R.default.ENABLE_RECURRING_LABEL)),d.default.createElement(_.Switch,{onChange:this.props.toogleRecurringFeature,value:u}))),d.default.createElement(p.Col,{xs:7,className:"notification-form__recurring-period-select"},d.default.createElement(p.FormGroup,{controlId:"recurring-select"},d.default.createElement(p.ControlLabel,null,E.default.t(R.default.RECURRING_PERIOD_LABEL)),d.default.createElement(m.default,{className:"notification-form__recurring-period-selector",clearable:!1,disabled:!u,elementId:"recurringPeriod",name:"recurringPeriod",onChange:this.handleRecurringPeriodSelect,options:this.RECURRING_PERIOD_OPTIONS,value:A.value})))),d.default.createElement(p.Row,null,d.default.createElement(p.Col,{xs:5},d.default.createElement(p.FormGroup,{controlId:"delivery"},d.default.createElement(p.ControlLabel,null,E.default.t(R.default.DELIVERY_LABEL)),d.default.createElement(m.default,{className:"notification-form__delivery-selector",clearable:!1,elementId:"delivery",name:"delivery",onChange:this.handleDeliverySelect,options:this.DELIVERY_OPTIONS,value:I.value}))),d.default.createElement(p.Col,{xs:7},d.default.createElement(_.ReduxFormElement,{disabled:r||U,elementId:"deliveryTime",field:S},d.default.createElement(_.DateTimePicker,{clearable:!1,utc:!1,inputProps:{placeholder:E.default.t(R.default.DATE_PICKER_LABEL),disabled:r||U},dateFormat:P.DISPLAY_DATE_FORMAT,timeFormat:x})))),k&&d.default.createElement(p.Row,null,d.default.createElement(p.Col,{xs:5},d.default.createElement(p.FormGroup,{controlId:"target"},d.default.createElement(p.ControlLabel,null,E.default.t(R.default.TARGET_LABEL)),d.default.createElement(m.default,{clearable:!1,disabled:r,elementId:"target",name:"target",onChange:this.handleTargetChanged,options:this.TARGET_OPTIONS,value:f.value}))),d.default.createElement(p.Col,{xs:7},B&&d.default.createElement(_.ReduxFormElement,{disabled:r,elementId:"contentUrl",field:s,name:E.default.t(R.default.CONTENT_URL_INPUT_LABEL)}),F&&d.default.createElement(_.ReduxFormElement,{disabled:r,elementId:"shortcutId",field:v,name:E.default.t(R.default.SCREEN_INPUT_LABEL)},d.default.createElement(T.ShortcutsDropdown,{shortcuts:n,shortcut:v.value})))),d.default.createElement(p.Row,null,d.default.createElement(p.Col,{xs:12},d.default.createElement(_.ReduxFormElement,{elementId:"title",name:E.default.t(R.default.TITLE_INPUT_LABEL),maxLength:255,disabled:r,field:b}))),I.value!==P.DELIVERY_TYPES.USER_SCHEDULED&&d.default.createElement(p.Row,null,d.default.createElement(p.Col,{xs:12},d.default.createElement(_.ReduxFormElement,{disabled:r,elementId:"summary",name:E.default.t(R.default.SUMMARY_INPUT_LABEL),field:y},d.default.createElement(p.FormControl,(0,o.default)({componentClass:"textarea",maxLength:255},y))))),I.value===P.DELIVERY_TYPES.USER_SCHEDULED&&d.default.createElement(d.default.Fragment,null,d.default.createElement(p.FormGroup,null,d.default.createElement(j.SummaryFields,{fields:l,name:E.default.t(R.default.SUMMARY_INPUT_LABEL),onSummariesChange:this.handleSummariesChange,submitting:r})),d.default.createElement(p.Row,null,d.default.createElement(p.Col,{xs:12},d.default.createElement(_.ReduxFormElement,{className:"notification-form__daily-number",disabled:r||G,elementId:"numberOfMessages",name:E.default.t(R.default.NUMBER_OF_NOTIFICATIONS),field:N},d.default.createElement(p.FormControl,(0,o.default)({type:"number",min:1},N)))))),d.default.createElement(p.ButtonToolbar,null,d.default.createElement(p.Button,{bsSize:"large",bsStyle:"primary",disabled:r||a,type:"submit"},d.default.createElement(_.LoaderContainer,{isLoading:r},M?E.default.t(R.default.BUTTON_SAVE):E.default.t(R.default.BUTTON_CREATE))),d.default.createElement(p.Button,{bsSize:"large",disabled:r,onClick:L},E.default.t(R.default.BUTTON_CANCEL))),D&&d.default.createElement("div",{className:"has-error"},d.default.createElement(p.HelpBlock,null,D)))}}]),n}(d.Component);A.propTypes={handleSubmit:h.default.func,groups:h.default.array,shortcuts:h.default.array,submitting:h.default.bool,invalid:h.default.bool,fields:h.default.object,onCancel:h.default.func,touch:h.default.func,error:h.default.string,isEdit:h.default.bool,settings:h.default.object,scheduledNotificationsEnabled:h.default.bool,recurringEnabled:h.default.bool,toogleRecurringFeature:h.default.func};t.default=(0,b.reduxForm)({getFormState:y.getFormState,form:"notificationForm",fields:["id","target","contentUrl","shortcutId","audience","audienceGroupIds","title","summary","summaries","numberOfMessages","delivery","deliveryTime","recurringPeriod","iconUrl","imageUrl"],validate:N.validateNotification})(A)},1438:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.mapModelToView=function(e){if(!e)return null;var t={};if(a.default.set(t,"id",e.id),"Silent"===e.type){var n=JSON.parse(a.default.get(e,"content.body")),r=a.default.map(n.actions,(function(e){return e.message}));a.default.set(t,"summaries",r),a.default.set(t,"numberOfMessages",n.numberOfMessages),a.default.set(t,"type","Silent")}var c=a.default.get(e,"audience.type");if(a.default.set(t,"audience",c),c===u.AUDIENCE_TYPES.GROUP){var f=a.default.get(e,"audience.groups"),s=a.default.map(f,(function(e){return a.default.toString(e.id)}));a.default.set(t,"audienceGroupIds",s),a.default.set(t,"audienceGroups",f)}var d=JSON.parse(a.default.get(e,"content.body")),p=a.default.get(d,"action.type");p===l&&(a.default.set(t,"target",u.TARGET_TYPES.URL),a.default.set(t,"contentUrl",a.default.get(e,"content.contentUrl")));p===i&&(a.default.set(t,"target",u.TARGET_TYPES.SCREEN),a.default.set(t,"shortcutId",a.default.get(d,"action.shortcutId")));a.default.set(t,"title",a.default.get(e,"content.title")),a.default.set(t,"summary",a.default.get(e,"content.summary")),a.default.set(t,"iconUrl",a.default.get(e,"content.iconUrl")),a.default.set(t,"imageUrl",a.default.get(e,"content.imageUrl"));var m=a.default.get(e,"deliveryTime");if(m){var v=o.default.utc(m).toISOString();a.default.set(t,"deliveryTime",v)}else a.default.set(t,"deliveryTime",m);e.active?a.default.set(t,"delivery",u.DELIVERY_TYPES.SCHEDULED):a.default.set(t,"delivery",u.DELIVERY_TYPES.NOW);return a.default.set(t,"recurringPeriod",a.default.get(e,"recurringPeriod")),t},t.mapViewToModel=function(e){if(!e)return null;var t={};e.id&&a.default.set(t,"id",e.id);var n=e.delivery===u.DELIVERY_TYPES.USER_SCHEDULED;if(n){var r=e.action,c=e.numberOfMessages,f=a.default.filter(e.summaries,(function(e){return!a.default.isEmpty(e)})),s={silent:!0,isMultiple:!0,numberOfMessages:c,action:r,actions:a.default.map(f,(function(e){return{message:e}}))};a.default.set(t,"content.body",JSON.stringify(s)),a.default.set(t,"type","Silent"),a.default.set(e,"target.type",null),a.default.set(t,"delivery",u.DELIVERY_TYPES.SCHEDULED)}if(!n&&e.target===u.TARGET_TYPES.APP){var d={action:{route:{key:"push-".concat((new Date).getTime().toString()),props:{title:e.title}}}};a.default.set(t,"target.type",e.target),a.default.set(t,"content.body",JSON.stringify(d))}if(!n&&e.target===u.TARGET_TYPES.URL){var p={action:{route:{key:"push-".concat((new Date).getTime().toString()),screen:"shoutem.web-view.WebViewScreen",props:{url:e.contentUrl,title:e.title,showNavigationToolbar:!0}},type:l}};a.default.set(t,"target.type",e.target),a.default.set(t,"content.body",JSON.stringify(p))}if(!n&&e.target===u.TARGET_TYPES.SCREEN){var m={action:{type:i,navigationAction:"shoutem.navigation.OPEN_MODAL",shortcutId:e.shortcutId}};a.default.set(t,"content.body",JSON.stringify(m))}if(a.default.set(t,"audience.type",e.audience),e.audience===u.AUDIENCE_TYPES.GROUP){var v=a.default.map(e.audienceGroupIds,(function(e){return{id:e}}));a.default.set(t,"audience.groups",v)}n||a.default.set(t,"delivery",e.delivery);if(e.delivery!==u.DELIVERY_TYPES.NOW){var E=o.default.utc(e.deliveryTime).toISOString();a.default.set(t,"deliveryTime",E)}e.target===u.TARGET_TYPES.URL&&a.default.set(t,"content.contentUrl",e.contentUrl);var g=a.default.get(e,"iconUrl");a.default.isEmpty(g)||a.default.set(t,"content.iconUrl",e.iconUrl);var h=a.default.get(e,"imageUrl");a.default.isEmpty(h)||a.default.set(t,"content.imageUrl",e.imageUrl);return a.default.set(t,"content.title",e.title),a.default.set(t,"content.summary",e.summary),a.default.set(t,"recurringPeriod",e.recurringPeriod),t};var a=r(n(19)),o=r(n(4)),u=n(55),l="shoutem.navigation.OPEN_MODAL",i="shoutem.application.EXECUTE_SHORTCUT"},1439:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.validateNotification=function(e){return{summary:i(e),shortcutId:c(e),audienceGroupIds:f(e),deliveryTime:s(e),numberOfMessages:d(e)}};var a=r(n(26)),o=r(n(19)),u=n(55),l=r(n(1440));function i(e){var t=e.delivery,n=e.summary;return t===u.DELIVERY_TYPES.USER_SCHEDULED||n?null:a.default.t(l.default.VALUE_REQUIRED_TEXT)}function c(e){var t=e.delivery,n=e.shortcutId,r=e.target;return r&&r!==u.TARGET_TYPES.URL&&r!==u.TARGET_TYPES.APP&&t!==u.DELIVERY_TYPES.USER_SCHEDULED?n?null:a.default.t(l.default.VALUE_REQUIRED_TEXT):null}function f(e){var t=e.audienceGroupIds;return e.audience===u.AUDIENCE_TYPES.ALL||t?null:a.default.t(l.default.VALUE_REQUIRED_TEXT)}function s(e){var t=e.deliveryTime;return e.delivery===u.DELIVERY_TYPES.NOW||t?null:a.default.t(l.default.VALUE_REQUIRED_TEXT)}function d(e){var t=e.delivery,n=e.numberOfMessages,r=e.summaries;if(t!==u.DELIVERY_TYPES.USER_SCHEDULED)return null;var i=o.default.filter(r,(function(e){return""!==e}));return!n||n<1||n>i.length?a.default.t(l.default.NUMBER_NOT_IN_RANGE_TEXT):null}},1440:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="notifications-services",a="".concat(r,".value-required-text"),o="".concat(r,".number-not-in-range-text");t.default={VALUE_REQUIRED_TEXT:a,NUMBER_NOT_IN_RANGE_TEXT:o}},1441:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(61)),u=r(n(7)),l=r(n(8)),i=r(n(5)),c=r(n(9)),f=r(n(10)),s=r(n(11)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),p=n(17),m=r(n(18)),v=r(n(26)),E=r(n(19)),g=r(n(0)),h=n(35),b=r(n(1442));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}n(1443),(t.default=function(e){(0,c.default)(n,e);var t=_(n);function n(e){var r;return(0,u.default)(this,n),r=t.call(this,e),(0,m.default)((0,i.default)(r)),r}return(0,l.default)(n,[{key:"handleAddSummaryField",value:function(){var e=this.props.fields.summaries,t=E.default.get(e,"value",[]);e.onChange([].concat((0,o.default)(t),[""]))}},{key:"handleRemoveSummaryField",value:function(e,t){var n=this.props,r=n.fields.summaries,a=n.onSummariesChange;e.stopPropagation();var u=(0,o.default)(r.value);u.splice(t,1),r.onChange(u),a()}},{key:"handleSummaryChange",value:function(e,t){var n=this.props,r=n.fields.summaries,a=n.onSummariesChange,u=(0,o.default)(r.value);u[t]=e.target.value,r.onChange(u),a()}},{key:"render",value:function(){var e=this,t=this.props,n=t.fields.summaries,r=t.name,a=t.submitting;return E.default.map(n.value,(function(t,o){var u=o===n.value.length-1,l=1===n.value.length,i=l?12:11;return d.default.createElement(d.default.Fragment,null,d.default.createElement(p.Row,null,d.default.createElement(p.Col,{xs:i},d.default.createElement(p.ControlLabel,null,r),d.default.createElement(p.FormControl,{componentClass:"textarea",disabled:a,maxLength:255,onChange:function(t){return e.handleSummaryChange(t,o)},value:t})),!l&&d.default.createElement(p.Col,{xs:1},d.default.createElement("div",{className:"summary-fields__delete-summary-field"},d.default.createElement(p.Button,{className:"btn-icon",onClick:function(t){e.handleRemoveSummaryField(t,o)}},d.default.createElement(h.FontIcon,{name:"delete",size:"24px"}))))),u&&d.default.createElement("div",{className:"summary-fields__add-summary-field"},d.default.createElement(p.Button,{className:"btn-icon",onClick:e.handleAddSummaryField},d.default.createElement(h.IconLabel,{iconName:"add"},v.default.t(b.default.ADD_NEW_SUMMARY)))))}))}}]),n}(d.Component)).propTypes={fields:g.default.arrayOf(g.default.object).isRequired,name:g.default.string,onAddSummaryField:g.default.func.isRequired,onSummariesChange:g.default.func,submitting:g.default.bool}},1442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="".concat("summary-fields",".add-new-summary");t.default={ADD_NEW_SUMMARY:r}},1443:function(e,t,n){},1444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="notification-form",a="".concat(r,".target-app-label"),o="".concat(r,".target-url-label"),u="".concat(r,".target-screen-label"),l="".concat(r,".audience-all-label"),i="".concat(r,".audience-group-label"),c="".concat(r,".delivery-now-label"),f="".concat(r,".delivery-scheduled-label"),s="".concat(r,".delivery-user-scheduled-label"),d="".concat(r,".target-label"),p="".concat(r,".content-url-input-label"),m="".concat(r,".screen-input-label"),v="".concat(r,".audience-label"),E="".concat(r,".delivery-label"),g="".concat(r,".date-picker-label"),h="".concat(r,".title-input-label"),b="".concat(r,".summary-input-label"),y="".concat(r,".number-of-notifications-input-label"),_="".concat(r,".button-save"),O="".concat(r,".button-create"),P="".concat(r,".button-cancel"),N="".concat(r,".enable-recurring-label"),T="".concat(r,".recurring-period-label"),j="".concat(r,".recurring-period-none"),R="".concat(r,".recurring-period-every-day"),I="".concat(r,".recurring-period-every-7-days"),S="".concat(r,".recurring-period-every-30-days");t.default={TARGET_APP_LABEL:a,TARGET_URL_LABEL:o,TARGET_SCREEN_LABEL:u,AUDIENCE_ALL_LABEL:l,AUDIENCE_GROUP_LABEL:i,DELIVERY_NOW_LABEL:c,DELIVERY_SCHEDULED_LABEL:f,DELIVERY_USER_SCHEDULED_LABEL:s,TARGET_LABEL:d,CONTENT_URL_INPUT_LABEL:p,SCREEN_INPUT_LABEL:m,AUDIENCE_LABEL:v,DELIVERY_LABEL:E,DATE_PICKER_LABEL:g,TITLE_INPUT_LABEL:h,SUMMARY_INPUT_LABEL:b,NUMBER_OF_NOTIFICATIONS:y,BUTTON_SAVE:_,BUTTON_CREATE:O,BUTTON_CANCEL:P,ENABLE_RECURRING_LABEL:N,RECURRING_PERIOD_LABEL:T,RECURRING_PERIOD_NONE:j,RECURRING_PERIOD_EVERY_DAY:R,RECURRING_PERIOD_EVERY_7_DAYS:I,RECURRING_PERIOD_EVERY_30_DAYS:S}},1445:function(e,t,n){},1446:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationInfoForm",{enumerable:!0,get:function(){return a.default}});var a=r(n(1447))},1447:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(7)),u=r(n(8)),l=r(n(5)),i=r(n(9)),c=r(n(10)),f=r(n(11)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),d=n(17),p=r(n(18)),m=r(n(26)),v=r(n(19)),E=r(n(4)),g=r(n(0)),h=n(63),b=n(55),y=r(n(1448));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}n(1449),(t.default=function(e){(0,i.default)(n,e);var t=O(n);function n(e){var r;return(0,o.default)(this,n),r=t.call(this,e),(0,p.default)((0,l.default)(r)),r}return(0,u.default)(n,[{key:"renderTarget",value:function(){var e=this.props,t=e.shortcuts,n=e.notification,r=n.target,a=n.contentUrl,o=n.shortcutId;if(v.default.isUndefined(r))return null;if(r===b.TARGET_TYPES.URL)return s.default.createElement(d.Row,null,s.default.createElement(d.Col,{xs:12},s.default.createElement(d.FormGroup,{controlId:"target"},s.default.createElement(d.ControlLabel,null,m.default.t(y.default.URL_INPUT_LABEL)),s.default.createElement(d.FormControl,{value:a}))));if(r===b.TARGET_TYPES.SCREEN){var u=(0,h.buildShortcutTree)(t),l=(0,h.createOptions)(u,"shortcut.key","shortcut.title"),i=v.default.find(l,{value:o}),c=v.default.get(i,"label");return s.default.createElement(d.Row,null,s.default.createElement(d.Col,{xs:12},s.default.createElement(d.FormGroup,{controlId:"target"},s.default.createElement(d.ControlLabel,null,m.default.t(y.default.SCREEN_INPUT_LABEL)),s.default.createElement(d.FormControl,{value:c}))))}return null}},{key:"render",value:function(){var e=this.props,t=e.shortcuts,n=e.notification,r=n.target,a=(n.contentUrl,n.shortcutId),o=n.audience,u=n.audienceGroups,l=n.title,i=n.summary,c=n.summaries,f=n.numberOfMessages,p=n.deliveryTime,g=n.type,_=e.onCancel;m.default.t(y.default.URL_INPUT_LABEL);if(r===b.TARGET_TYPES.SCREEN){m.default.t(y.default.SCREEN_INPUT_LABEL);var O=(0,h.buildShortcutTree)(t),P=(0,h.createOptions)(O,"shortcut.key","shortcut.title"),N=v.default.find(P,{value:a});v.default.get(N,"label")}var T=m.default.t(y.default.AUDIENCE_ALL_VALUE);if(o===b.AUDIENCE_TYPES.GROUP){var j=v.default.map(u,(function(e){return v.default.truncate(e.name)}));T=v.default.join(j,", ")}var R=(0,E.default)(p).format(b.DISPLAY_DATE_TIME_FORMAT);return s.default.createElement("form",{className:"notification-info-form"},this.renderTarget(),s.default.createElement(d.Row,null,s.default.createElement(d.Col,{xs:12},s.default.createElement(d.FormGroup,{controlId:"audience"},s.default.createElement(d.ControlLabel,null,m.default.t(y.default.AUDIENCE_LABEL)),s.default.createElement(d.FormControl,{value:T})))),s.default.createElement(d.Row,null,s.default.createElement(d.Col,{xs:12},s.default.createElement(d.FormGroup,{controlId:"deliveryTime"},s.default.createElement(d.ControlLabel,null,m.default.t(y.default.DELIVERY_LABEL)),s.default.createElement(d.FormControl,{value:R})))),s.default.createElement(d.Row,null,s.default.createElement(d.Col,{xs:12},s.default.createElement(d.FormGroup,{controlId:"title"},s.default.createElement(d.ControlLabel,null,m.default.t(y.default.TITLE_LABEL)),s.default.createElement(d.FormControl,{value:l})))),"Silent"!==g&&s.default.createElement(d.Row,null,s.default.createElement(d.Col,{xs:12},s.default.createElement(d.FormGroup,{controlId:"summary"},s.default.createElement(d.ControlLabel,null,m.default.t(y.default.MESSAGE_LABEL)),s.default.createElement(d.FormControl,{componentClass:"textarea",value:i})))),"Silent"===g&&s.default.createElement(s.default.Fragment,null,v.default.map(c,(function(e){return s.default.createElement(d.FormGroup,null,s.default.createElement(d.ControlLabel,null,m.default.t(y.default.MESSAGE_LABEL)),s.default.createElement(d.FormControl,{componentClass:"textarea",value:e}))})),s.default.createElement(d.FormGroup,null,s.default.createElement(d.ControlLabel,null,m.default.t(y.default.NUMBER_OF_MESSAGES_LABEL)),s.default.createElement(d.FormControl,{value:f}))),s.default.createElement(d.ButtonToolbar,null,s.default.createElement(d.Button,{bsSize:"large",onClick:_},m.default.t(y.default.BUTTON_CANCEL))))}}]),n}(s.Component)).propTypes={notification:g.default.object,shortcuts:g.default.array,onCancel:g.default.func}},1448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="notification-info-form",a="".concat(r,".url-input-label"),o="".concat(r,".screen-input-label"),u="".concat(r,".audience-all-label"),l="".concat(r,".audience-label"),i="".concat(r,".delivery-label"),c="".concat(r,".title-label"),f="".concat(r,".message-label"),s="".concat(r,".number-of-messages-label"),d="".concat(r,".button-cancel");t.default={URL_INPUT_LABEL:a,SCREEN_INPUT_LABEL:o,AUDIENCE_ALL_VALUE:u,AUDIENCE_LABEL:l,DELIVERY_LABEL:i,TITLE_LABEL:c,MESSAGE_LABEL:f,NUMBER_OF_MESSAGES_LABEL:s,BUTTON_CANCEL:d}},1449:function(e,t,n){},1450:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationsTable",{enumerable:!0,get:function(){return a.default}});var a=r(n(1451))},1451:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(7)),u=r(n(8)),l=r(n(5)),i=r(n(9)),c=r(n(10)),f=r(n(11)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),d=n(17),p=r(n(18)),m=r(n(26)),v=r(n(19)),E=r(n(0)),g=n(35),h=n(55),b=r(n(1452));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}function O(e){return"group"===v.default.get(e,"audience.type")?m.default.t(b.default.AUDIENCE_GROUP_VALUE):m.default.t(b.default.AUDIENCE_ALL_VALUE)}function P(e){var t=v.default.get(e,"active"),n=v.default.get(e,"recurringPeriod"),r=t?"clock":"check";return t&&n!==h.RECURRING_PERIOD_TYPES.NONE&&(r="refresh"),s.default.createElement(g.FontIcon,{name:r,size:"24px"})}n(1453),(t.default=function(e){(0,i.default)(n,e);var t=_(n);function n(e){var r;return(0,o.default)(this,n),r=t.call(this,e),(0,p.default)((0,l.default)(r)),r}return(0,u.default)(n,[{key:"getRowDescriptors",value:function(){return[{getDisplayValue:P,isRequired:!0},{property:"content.summary",isRequired:!0},{getDisplayValue:O,isRequired:!0},{getDisplayValue:this.renderEditValue,isRequired:!1},{getDisplayValue:this.renderDeleteValue,isRequired:!1}]}},{key:"renderEditValue",value:function(e){var t=this.props.onEditClick;return v.default.get(e,"active")?s.default.createElement(d.Button,{className:"btn-icon pull-right",onClick:function(){return t(e)}},s.default.createElement(g.FontIcon,{name:"edit",size:"24px"})):null}},{key:"renderDeleteValue",value:function(e){var t=this.props.onDeleteClick;return s.default.createElement(d.Button,{className:"btn-icon pull-right",onClick:function(n){n.stopPropagation(),t(e)}},s.default.createElement(g.FontIcon,{name:"delete",size:"24px"}))}},{key:"render",value:function(){var e=this.props,t=e.notifications,n=e.onRowClick,r=e.onAddClick;return v.default.forEach(t,(function(e){if("Silent"===e.type)try{var t,n=JSON.parse(null===(t=e.content)||void 0===t?void 0:t.body);if(n){var r=v.default.map(n.actions,(function(e){return e.message}));v.default.isEmpty(r)||v.default.set(e,"content.summary",r.join(", "))}}catch(e){}})),s.default.createElement("div",{className:"notifications-table"},s.default.createElement("div",{className:"notifications-table__title"},s.default.createElement("h3",null,m.default.t(b.default.TABLE_TITLE)),s.default.createElement(d.Button,{className:"btn-icon pull-right",onClick:r},s.default.createElement(g.IconLabel,{iconName:"add"},m.default.t(b.default.BUTTON_CREATE_NEW)))),s.default.createElement(g.EditableTable,{isStatic:!0,canUpdate:!1,canDelete:!1,className:"notifications-table",emptyStateText:m.default.t(b.default.NO_NOTIFICATIONS_TEXT),headers:[m.default.t(b.default.HEADER_STATUS_LABEL),m.default.t(b.default.HEADER_MESSAGE_LABEL),m.default.t(b.default.HEADER_AUDIENCE_LABEL),"",""],rowDescriptors:this.getRowDescriptors(),rows:t,onRowClick:n}))}}]),n}(s.Component)).propTypes={notifications:E.default.array,onRowClick:E.default.func,onAddClick:E.default.func,onDeleteClick:E.default.func,onEditClick:E.default.func}},1452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="notifications-table",a="".concat(r,".audience-group-label"),o="".concat(r,".audience-all-label"),u="".concat(r,".header-status-label"),l="".concat(r,".header-message-label"),i="".concat(r,".header-audience-label"),c="".concat(r,".table-title"),f="".concat(r,".button-create-new"),s="".concat(r,".no-notifications-text");t.default={AUDIENCE_GROUP_VALUE:a,AUDIENCE_ALL_VALUE:o,HEADER_STATUS_LABEL:u,HEADER_MESSAGE_LABEL:l,HEADER_AUDIENCE_LABEL:i,TABLE_TITLE:c,BUTTON_CREATE_NEW:f,NO_NOTIFICATIONS_TEXT:s}},1453:function(e,t,n){},1454:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="notifications-fragment",a="".concat(r,".confirm-modal-title"),o="".concat(r,".confirm-modal-message"),u="".concat(r,".confirm-modal-confirm-label"),l="".concat(r,".confirm-modal-abort-label"),i="".concat(r,".alert-scheduled-text"),c="".concat(r,".alert-sent-text"),f="".concat(r,".title-edit-push-notification-text"),s="".concat(r,".title-new-push-notification-text"),d="".concat(r,".inline-modal-title");t.default={CONFIRM_MODAL_TITLE:a,CONFIRM_MODAL_MESSAGE:o,CONFIRM_MODAL_CONFIRM_LABEL:u,CONFIRM_MODAL_ABORT_LABEL:l,ALERT_SCHEDULED_TEXT:i,ALERT_SENT_TEXT:c,TITLE_EDIT_PUSH_NOTIFICATION_TEXT:f,TITLE_NEW_PUSH_NOTIFICATION_TEXT:s,INLINE_MODAL_TITLE:d}},1455:function(e,t,n){},1456:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="notifications-general-page",a="".concat(r,".button-save"),o="".concat(r,".error-message");t.default={BUTTON_SAVE:a,ERROR_MESSAGE:o}},1457:function(e,t,n){},1458:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GroupsPage",{enumerable:!0,get:function(){return a.default}});var a=r(n(1459))},1459:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(7)),u=r(n(8)),l=r(n(5)),i=r(n(9)),c=r(n(10)),f=r(n(11)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),d=n(44),p=r(n(18)),m=r(n(19)),v=r(n(0)),E=n(204),g=n(632),h=n(51);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var _=function(e){(0,i.default)(n,e);var t=y(n);function n(e,r){var a;(0,o.default)(this,n),a=t.call(this,e,r),(0,p.default)((0,l.default)(a));var u=e.appId,i=r.page,c=m.default.get(i,"pageContext.url.apps",{});return a.assetManager=new g.AssetManager({scopeType:"application",scopeId:u,assetPolicyHost:c}),a}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props.appId;return s.default.createElement("div",{className:"groups-page"},s.default.createElement(E.Groups,{appId:e,assetManager:this.assetManager}))}}]),n}(s.Component);_.propTypes={appId:v.default.string.isRequired},_.contextTypes={page:v.default.object.isRequired};t.default=(0,d.connect)((function(e,t){var n=t.extensionName,r=(0,h.getExtension)(e,n);return{extension:r,appId:m.default.get(r,"app")}}))(_)},1460:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JourneysPage",{enumerable:!0,get:function(){return a.default}});var a=r(n(1461))},1461:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var o=r(n(56)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),l=n(17),i=n(44),c=r(n(26)),f=r(n(19)),s=r(n(0)),d=n(35),p=n(675),m=r(n(1462));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function E(e){var t=e.appId,n=(0,i.useDispatch)(),r=(0,u.useState)(!1),a=(0,o.default)(r,2),s=a[0],v=a[1],E=(0,u.useState)(),g=(0,o.default)(E,2),h=g[0],b=g[1],y=(0,u.useState)(!1),_=(0,o.default)(y,2),O=_[0],P=_[1],N=(0,u.useState)(!0),T=(0,o.default)(N,2),j=T[0],R=T[1];(0,u.useEffect)((function(){R(!0),n((0,p.fetchTriggers)(t)).catch((function(){return P(!0)})).finally((function(){return R(!1)}))}),[t,n]);var I=(0,u.useCallback)((function(){return v(!0)}),[]),S=(0,u.useCallback)((function(){return v(!1)}),[]),A=(0,u.useCallback)((function(){P(!1)}),[]),L=(0,u.useCallback)((function(){b(void 0),I()}),[I]),C=(0,u.useCallback)((function(e){b(e),I()}),[I]);return u.default.createElement(d.LoaderContainer,{isLoading:j,className:"general-settings-page settings-page is-wide"},O&&u.default.createElement(l.Alert,{bsStyle:"danger",onDismiss:A},c.default.t(m.default.ERROR_MESSAGE)),u.default.createElement(p.JourneysTable,{onAddClick:L,onEditClick:C,onRowClick:C}),s&&u.default.createElement(d.InlineModal,{className:"journeys-page-modal",onHide:S,title:c.default.t(m.default.ADD_JOURNEY_TITLE)},u.default.createElement(p.JourneyForm,{isEdit:!f.default.isEmpty(h),initialValues:h,onSubmit:S})))}n(1463),E.propTypes={appId:s.default.string.isRequired}},1462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={ADD_JOURNEY_TITLE:"journeys-page-add-journey-title",ERROR_MESSAGE:"journeys-page-error"}},1463:function(e,t,n){},1464:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotificationsPage",{enumerable:!0,get:function(){return a.default}});var a=r(n(1465))},1465:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(7)),u=r(n(8)),l=r(n(5)),i=r(n(9)),c=r(n(10)),f=r(n(11)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),d=n(17),p=n(44),m=r(n(18)),v=r(n(3)),E=r(n(26)),g=r(n(19)),h=r(n(0)),b=n(38),y=n(672),_=n(679),O=n(51),P=n(23),N=r(n(1466));function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}n(1467);var R=function(e){(0,i.default)(n,e);var t=j(n);function n(e){var r;return(0,o.default)(this,n),r=t.call(this,e),(0,m.default)((0,l.default)(r)),r.state={showAlert:!1,alertMessage:null,isModalShown:!1},r}return(0,u.default)(n,[{key:"componentWillMount",value:function(){this.checkData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"checkData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.appId,r=e.loadApplicationStatus;(0,P.shouldLoad)(e,t,"applicationStatus")&&r(n)}},{key:"hideAlert",value:function(){this.setState({showAlert:!1})}},{key:"removeAlertMessage",value:function(){this.setState({alertMessage:null})}},{key:"handleShowAlert",value:function(e){this.setState({showAlert:!0,alertMessage:e}),setTimeout(this.hideAlert,4e3)}},{key:"handleUpdateIsModalShown",value:function(e){this.setState({isModalShown:e})}},{key:"renderAlert",value:function(){var e=this.state,t=e.showAlert,n=e.alertMessage,r=(0,v.default)("notification-alert",{"notification-alert-show":t});return s.default.createElement(d.Alert,{bsStyle:"success",className:r},n)}},{key:"render",value:function(){var e=this.props,t=e.appId,n=e.applicationStatus,r=e.settings,a=this.state.isModalShown,o=(0,y.isPublished)(n);return s.default.createElement("div",{className:"notifications-page"},!a&&s.default.createElement(s.default.Fragment,null,!o&&s.default.createElement(d.Alert,{className:"publish-alert"},E.default.t(N.default.PUBLISH_ALERT)),this.renderAlert()),s.default.createElement(_.Notifications,{appId:t,onModalShown:this.handleUpdateIsModalShown,showAlert:this.handleShowAlert,settings:r}))}}]),n}(s.Component);R.propTypes={appId:h.default.string.isRequired,applicationStatus:h.default.object,settings:h.default.object};t.default=(0,p.connect)((function(e,t){var n=t.extensionName,r=(0,O.getExtension)(e,n),a=g.default.get(r,"settings",{}),o=(0,y.getApplicationStatus)(e);return{extension:r,appId:g.default.get(r,"app"),applicationStatus:o,settings:a}}),(function(e){return(0,b.bindActionCreators)({loadApplicationStatus:y.loadApplicationStatus},e)}))(R)},1466:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="".concat("notifications-page",".publish-alert");t.default={PUBLISH_ALERT:r}},1467:function(e,t,n){},1468:function(e,t,n){},1469:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"PageProvider",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"connectPage",{enumerable:!0,get:function(){return a.default}});var a=r(n(1470)),o=r(n(1471)),u=r(n(1472))},1470:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.connectPageContext=f,t.default=function(){return function(e){return f((0,i.connect)(s)(e))}};var a=r(n(22)),o=r(n(1)),u=r(n(0)),l=r(n(19)),i=n(44),c=n(51);function f(e){function t(t,n){var r=n.page,u=l.default.pick(r.getPageContext(),["appId","appOwnerId","extensionName","ownExtensionName","shortcutId","screenId"]),i=r.getParameters();return o.default.createElement(e,(0,a.default)({},u,{parameters:i}))}return t.contextTypes={page:u.default.object},t}function s(e,t){var n=t.shortcutId,r=t.extensionName,a=t.ownExtensionName;return{shortcut:(0,c.getShortcut)(e,n),extension:(0,c.getExtension)(e,r),ownExtension:(0,c.getExtension)(e,a)}}},1471:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(14)),o=r(n(7)),u=r(n(8)),l=r(n(33));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.default=function(){function e(t,n){(0,o.default)(this,e),this.pageContext=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ownExtensionName:(0,l.default)()},t),this.parameters=n}return(0,u.default)(e,[{key:"getPageContext",value:function(){return this.pageContext}},{key:"getParameters",value:function(){return this.parameters}}]),e}()},1472:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7)),o=r(n(8)),u=r(n(9)),l=r(n(10)),i=r(n(11)),c=n(1),f=r(n(0));function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.default)(e);if(t){var a=(0,i.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var d=t.default=function(e){(0,u.default)(n,e);var t=s(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"getChildContext",value:function(){return{page:this.props.page}}},{key:"render",value:function(){var e=this.props.children;return c.Children.only(e)}}]),n}(c.PureComponent);d.propTypes={page:f.default.object,children:f.default.node},d.childContextTypes={page:f.default.object}},1473:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LocalizationProvider",{enumerable:!0,get:function(){return a.default}});var a=r(n(1474))},1474:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LocalizationProvider=void 0;var o=r(n(141)),u=r(n(142)),l=r(n(14)),i=r(n(7)),c=r(n(8)),f=r(n(5)),s=r(n(9)),d=r(n(10)),p=r(n(11)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(1)),v=r(n(0)),E=r(n(26)),g=n(1483),h=r(n(19)),b=n(44),y=n(35),_=r(n(1475));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var N=t.LocalizationProvider=function(e){(0,s.default)(r,e);var t,n=P(r);function r(e){var t;return(0,i.default)(this,r),(t=n.call(this,e)).handleInjection=t.handleInjection.bind((0,f.default)(t)),t.state={inProgress:!0},t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.ownExtensionName,n=e.locale,r=e.translationUrl,a=h.default.get(_.default,t);E.default.use(g.initReactI18next).init({lng:"en",fallbackLng:"en",ns:[t],defaultNS:t,nsSeparator:!1,keySeparator:!1,resources:{en:(0,l.default)({},t,a)}}),this.handleInjection(n,r)}},{key:"componentWillReceiveProps",value:function(e){var t=e.locale,n=e.translationUrl,r=this.props,a=r.locale;r.translationUrl===n&&t===a||this.handleInjection(t,n)}},{key:"handleInjection",value:(t=(0,u.default)(o.default.mark((function e(t,n){var r,a,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.ownExtensionName,!n){e.next=19;break}return e.prev=2,e.next=5,fetch(n);case 5:return a=e.sent,e.next=8,a.json();case 8:if(u=e.sent,!(l=h.default.get(u,r))){e.next=15;break}return e.next=13,E.default.addResourceBundle(t,r,l);case 13:return e.next=15,E.default.changeLanguage(t);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(2);case 19:this.setState({inProgress:!1});case 20:case"end":return e.stop()}}),e,this,[[2,17]])}))),function(e,n){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children;return this.state.inProgress?m.default.createElement(y.LoaderContainer,{size:"50px",isLoading:!0}):e}}]),r}(m.PureComponent);N.propTypes={children:v.default.node,ownExtensionName:v.default.string,locale:v.default.string,translationUrl:v.default.string};t.default=(0,b.connect)((function(e,t){var n=t.context;return{ownExtensionName:h.default.get(n,"ownExtensionName"),locale:h.default.get(n,"i18n.locale"),translationUrl:h.default.get(n,"i18n.translationUrl")}}))(N)},1475:function(e){e.exports=JSON.parse('{"shoutem":{"notification-center":{"group-form.name-input-label":"Name","group-form.image-picker-label":"Image","group-form.image-help-text":"120x120px","group-form.subscribe-toggle-text":"Subscribe by default","group-form.button-save":"Save","group-form.button-add":"Add","group-form.button-cancel":"Cancel","groups.delete-modal-title":"Delete group","groups.delete-modal-message":"Are you sure you want to delete \\"{{groupName}}\\"? You will lose all users from that group already selected in the settings category.","groups.delete-modal-confirm-label":"Delete","groups.delete-modal-abort-label":"Cancel","groups.list-title":"List of notification groups","groups.add-group-label":"Add group","groups.groups-empty-text":"No groups yet","groups.add-group-modal-title":"Add group","groups-services.value-required-text":"Value is required","groups-dropdown.dropdown-placeholder":"Select group","notification-form.target-app-label":"App","notification-form.target-url-label":"URL","notification-form.target-screen-label":"Screen","notification-form.audience-all-label":"All","notification-form.audience-group-label":"Group","notification-form.delivery-now-label":"Now","notification-form.delivery-scheduled-label":"Scheduled","notification-form.delivery-user-scheduled-label":"User scheduled","notification-form.target-label":"Select what to open","notification-form.content-url-input-label":"URL to open","notification-form.screen-input-label":"Screen to open","notification-form.audience-label":"Audience","notification-form.delivery-label":"Delivery date and time","notification-form.date-picker-label":"Select date and time","notification-form.title-input-label":"Title","notification-form.summary-input-label":"Message","notification-form.number-of-notifications-input-label":"Selected number of daily user scheduled notifications","notification-form.button-save":"Save","notification-form.button-create":"Create","notification-form.button-cancel":"Cancel","notification-form.enable-recurring-label":"Enable recurring","notification-form.recurring-period-label":"Recurring period","notification-form.recurring-period-none":"None","notification-form.recurring-period-every-day":"Every day","notification-form.recurring-period-every-7-days":"Every 7 days","notification-form.recurring-period-every-30-days":"Every 30 days","notification-info-form.url-input-label":"URL to open","notification-info-form.screen-input-label":"Screen to open","notification-info-form.audience-all-label":"All","notification-info-form.audience-label":"Audience","notification-info-form.delivery-label":"Send date","notification-info-form.title-label":"Title","notification-info-form.message-label":"Message","notification-info-form.number-of-messages-label":"Selected number of daily user scheduled notifications","notification-info-form.button-cancel":"Cancel","notifications-table.audience-group-label":"Group","notifications-table.audience-all-label":"All","notifications-table.header-status-label":"Status","notifications-table.header-message-label":"Message","notifications-table.header-audience-label":"Audience","notifications-table.table-title":"List of notifications","notifications-table.button-create-new":"Create new","notifications-table.no-notifications-text":"No notifications yet","shortcuts-dropdown.dropdown-placeholder":"Screen to open","notifications-fragment.confirm-modal-title":"Delete notification","notifications-fragment.confirm-modal-message":"Are you sure you want to delete this notification?","notifications-fragment.confirm-modal-confirm-label":"Delete","notifications-fragment.confirm-modal-abort-label":"Cancel","notifications-fragment.alert-scheduled-text":"Notification scheduled","notifications-fragment.alert-sent-text":"Notification sent","notifications-fragment.title-edit-push-notification-text":"Edit push notification","notifications-fragment.title-new-push-notification-text":"New push notification","notifications-fragment.inline-modal-title":"Sent notification info","notifications-services.value-required-text":"Value is required","notifications-services.number-not-in-range-text":"Number has to be between 1 and number of summaries you\'ve entered","notifications-page.publish-alert":"Push notifications can\'t reach users until your app is published.","chime-uploader-fragment.chime-alert":"App needs to be republished in the store for chime sound to update","chime-uploader-fragment.error-file-reject":"File rejected.","chime-uploader-fragment.error-invalid-file-name":"Invalid file name. Chime sound name must start with a letter and may contain only letters, digits and underscores.","chime-uploader-fragment.error-upload-fail":"File upload failed.","chime-uploader-fragment.error-max-size":"Max allowed file size is {{size}}MB!","chime-uploader-fragment.settings-title":"Chime settings","chime-uploader-fragment.sound-title":"Select chime sound for push notification","notifications-general-page.button-save":"Save","notifications-general-page.error-message":"Reminder notification message is empty","notification-settings.disabled-label":"Disabled","notification-settings.enabled-label":"Enabled","notification-settings.reminder-label":"Reminder","chime-upload-input.button-browse":"Browse","notification-settings.pn-settings-title":"User\'s push notification settings","notification-settings.reminder-message-label":"Reminder notification message","notification-settings.scheduled-notifications-label":"User scheduled notification","summary-fields.add-new-summary":"Add another message","journeys-page-add-journey-title":"New push journey","journeys-page-error":"Something went wrong. Please try again later","journeys-title":"Notification journeys","journeys-table-title":"Title","journeys-table-add-new":"Add new","journeys-table-no-journeys-placeholder":"No journeys yet","journey-form-add-new-notification":"Add new notification","journey-form-field-required\'":"Field is required","journey-form-title-label":"Journey title","journey-form-save":"Save","journey-form-update-warning":"Note: Previously scheduled notifications will still dispatch per previous settings.\\n Update only affects future notifications.","journey-form-trigger-label":"What triggers the journey?","journey-form-no-available-triggers":"No available triggers","notification-input-delay-label":"Delay after the trigger","notification-input-minutes-label":"minutes","notification-input-minute-label":"minute","notification-input-hours-label":"hours","notification-input-hour-label":"hour","notification-input-day-label":"day","notification-input-days-label":"days","notification-input-body-label":"Notification body","notification-input-content-url-label":"Url to open","notification-input-content-shortcut-label":"Screen to open","notification-input-title":"Notification {{index}}","notification-input-notification-title-label":"Notification title","notification-input-target-url-label":"Url","notification-input-target-screen-label":"Screen","notification-input-target-label":"Select what to open","Notification title color":"Notification title color","Notification message color":"Notification message color","Notification timestamp color":"Notification timestamp color","Notification center":"Notification center"}}}')},1476:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SyncStateEngineProvider",{enumerable:!0,get:function(){return a.default}});var a=r(n(1477))},1477:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SyncStateEngineProvider=void 0;var a=r(n(61)),o=r(n(7)),u=r(n(8)),l=r(n(5)),i=r(n(9)),c=r(n(10)),f=r(n(11)),s=n(1),d=n(44),p=r(n(19)),m=r(n(0)),v=r(n(337)),E=r(n(33));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var h=t.SyncStateEngineProvider=function(e){(0,i.default)(n,e);var t=g(n);function n(e){var r;return(0,o.default)(this,n),(r=t.call(this,e)).handleActions=r.handleActions.bind((0,l.default)(r)),r.handleSandboxMessage=r.handleSandboxMessage.bind((0,l.default)(r)),r.checkData=r.checkData.bind((0,l.default)(r)),r.syncStateEngine=r.props.syncStateEngine,v.default.subscribe(r.handleSandboxMessage),r.checkData(e),r}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.syncStateEngine.subscribeToActions(this.handleActions)}},{key:"componentWillReceiveProps",value:function(e){this.checkData(e,this.props)}},{key:"componentWillUnmount",value:function(){this.syncStateEngine.unsubscribeFromActions(this.handleActions)}},{key:"checkData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.state,r=e.state,o=this.syncStateEngine.calculateDifferences(n,r,(0,E.default)());o&&v.default.sendMessage.apply(v.default,(0,a.default)(o))}},{key:"handleActions",value:function(e,t){"builder"!==p.default.get(t,"id")&&v.default.sendMessage.apply(v.default,(0,a.default)(e))}},{key:"handleSandboxMessage",value:function(e){var t=this.syncStateEngine.processExternalChange(e,{id:"builder"});t&&this.props.syncAction(t)}},{key:"render",value:function(){var e=this.props.children;return s.Children.only(e)}}]),n}(s.PureComponent);h.propTypes={state:m.default.object,syncStateEngine:m.default.object,syncAction:m.default.func,children:m.default.node};t.default=(0,d.connect)((function(e){return{state:e}}),(function(e){return{syncAction:function(t){return e(t)}}}))(h)},1478:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=[u.default,l.apiMiddleware,i.apiStateMiddleware,(0,c.syncStateEngineMiddleware)(n)],a=(0,o.compose)(o.applyMiddleware.apply(void 0,r)),p=e.ownExtensionName,m=f.default.get(s,"reducer"),v=(0,i.enableRio)((0,d.createRootReducer)(p,m)),E=(0,c.enableStateSync)(v,n);return a(o.createStore)(E,t)},n(336);var o=n(38),u=r(n(1479)),l=n(134),i=n(23),c=n(627),f=r(n(19)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(630)),d=n(1480);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}},1480:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.createRootReducer=function(e,t){return(0,o.combineReducers)((0,a.default)({core:u.reducer},e,t))};var a=r(n(14)),o=n(38),u=n(51)},200:function(e,t,n){"use strict";var r=n(2),a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.getFormState=function(e){return function(e){return u.default.get(e,(0,m.default)(),{})}(e).form},t.invalidateCurrentBuild=function(e){var t={type:"shoutem.core.build-invalidate-actions",attributes:{buildType:"production"}},n={schema:"shoutem.core.build-invalidate-actions",request:{endpoint:v.shoutemUrls.appsApi("v1/apps/".concat(e,"/configurations/current/builds/actions/invalidate")),headers:{"Content-Type":"application/vnd.api+json",accept:"application/vnd.api+json"}}};return(0,c.create)(n,t)},t.reducer=void 0;var o=r(n(14)),u=r(n(19)),l=n(318),i=n(51),c=n(23),f=g(n(672)),s=g(n(204)),d=g(n(675)),p=g(n(679)),m=r(n(33)),v=n(63);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}t.reducer=function(){var e;return(0,i.createScopedReducer)({extension:(e={form:l.reducer},(0,o.default)(e,f.moduleName,f.default),(0,o.default)(e,p.moduleName,p.default),(0,o.default)(e,d.moduleName,d.default),(0,o.default)(e,s.moduleName,s.default),e)})}},203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moduleName=t.APPLICATION_STATUS=void 0;t.moduleName="app",t.APPLICATION_STATUS="shoutem.core.application-statuses"},204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Groups",{enumerable:!0,get:function(){return u.Groups}}),Object.defineProperty(t,"GroupsDropdown",{enumerable:!0,get:function(){return a.GroupsDropdown}}),t.default=void 0,Object.defineProperty(t,"getGroups",{enumerable:!0,get:function(){return r.getGroups}}),Object.defineProperty(t,"getRawGroups",{enumerable:!0,get:function(){return r.getRawGroups}}),Object.defineProperty(t,"loadGroups",{enumerable:!0,get:function(){return r.loadGroups}}),Object.defineProperty(t,"moduleName",{enumerable:!0,get:function(){return o.moduleName}});var r=n(673),a=n(674),o=n(205),u=n(1405);t.default=r.reducer},205:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moduleName=t.GROUPS=void 0;t.moduleName="groups",t.GROUPS="shoutem.legacy.notification-groups"},327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fetchTriggers",{enumerable:!0,get:function(){return r.fetchTriggers}}),Object.defineProperty(t,"getAvailableTriggers",{enumerable:!0,get:function(){return o.getAvailableTriggers}}),Object.defineProperty(t,"getJourneys",{enumerable:!0,get:function(){return o.getJourneys}}),Object.defineProperty(t,"getTriggers",{enumerable:!0,get:function(){return o.getTriggers}}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return a.reducer}});var r=n(676),a=n(1409),o=n(1410)},33:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e?"".concat(a.default.name,".").concat(e):a.default.name};var a=r(n(1275))},55:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.moduleName=t.TARGET_TYPES=t.RECURRING_PERIOD_TYPES=t.RECURRING_FEATURE=t.NOTIFICATIONS=t.DISPLAY_TIME_FORMAT=t.DISPLAY_DATE_TIME_FORMAT=t.DISPLAY_DATE_FORMAT=t.DELIVERY_TYPES=t.AUDIENCE_TYPES=void 0;var a=r(n(33));t.moduleName="notifications",t.NOTIFICATIONS="shoutem.legacy.notifications",t.DISPLAY_DATE_FORMAT="DD MMMM YYYY",t.DISPLAY_TIME_FORMAT="HH:mm",t.DISPLAY_DATE_TIME_FORMAT="DD MMM YYYY HH:mm",t.RECURRING_FEATURE=(0,a.default)("recurring-push"),t.TARGET_TYPES={APP:"none",URL:"url",SCREEN:"screen"},t.AUDIENCE_TYPES={ALL:"broadcast",GROUP:"group"},t.DELIVERY_TYPES={NOW:"now",SCHEDULED:"scheduled",USER_SCHEDULED:"user-scheduled"},t.RECURRING_PERIOD_TYPES={NONE:"none",EVERY_DAY:"everyDay",EVERY_7_DAYS:"every7Days",EVERY_30_DAYS:"every30Days"}},63:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"buildShortcutTree",{enumerable:!0,get:function(){return o.buildShortcutTree}}),Object.defineProperty(t,"createOptions",{enumerable:!0,get:function(){return o.createOptions}}),t.shoutemUrls=void 0;var a=r(n(1383)),o=n(1384);t.shoutemUrls=new a.default},630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageWillMount=function(e){t.reducer=(0,a.reducer)(),o.shoutemUrls.init(e)},t.reducer=t.pages=void 0;var r=n(1272),a=n(200),o=n(63);n(1468);t.pages={GeneralPage:r.GeneralPage,GroupsPage:r.GroupsPage,JourneysPage:r.JourneysPage,NotificationsPage:r.NotificationsPage},t.reducer=null},631:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ChimeFilePreview",{enumerable:!0,get:function(){return r.ChimeFilePreview}}),Object.defineProperty(t,"ChimeUploadInput",{enumerable:!0,get:function(){return a.ChimeUploadInput}}),Object.defineProperty(t,"NotificationSettings",{enumerable:!0,get:function(){return o.NotificationSettings}});var r=n(1277),a=n(1285),o=n(1289)},672:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"getApplicationStatus",{enumerable:!0,get:function(){return r.getApplicationStatus}}),Object.defineProperty(t,"isPublished",{enumerable:!0,get:function(){return o.isPublished}}),Object.defineProperty(t,"loadApplicationStatus",{enumerable:!0,get:function(){return r.loadApplicationStatus}}),Object.defineProperty(t,"moduleName",{enumerable:!0,get:function(){return a.moduleName}});var r=n(1381),a=n(203),o=n(1387);t.default=r.reducer},673:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createGroup",{enumerable:!0,get:function(){return r.createGroup}}),Object.defineProperty(t,"deleteGroup",{enumerable:!0,get:function(){return r.deleteGroup}}),Object.defineProperty(t,"getGroups",{enumerable:!0,get:function(){return o.getGroups}}),Object.defineProperty(t,"getRawGroups",{enumerable:!0,get:function(){return o.getRawGroups}}),Object.defineProperty(t,"loadGroups",{enumerable:!0,get:function(){return r.loadGroups}}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return a.reducer}}),Object.defineProperty(t,"updateGroup",{enumerable:!0,get:function(){return r.updateGroup}});var r=n(1389),a=n(1390),o=n(1391)},674:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GroupForm",{enumerable:!0,get:function(){return r.GroupForm}}),Object.defineProperty(t,"GroupNode",{enumerable:!0,get:function(){return a.GroupNode}}),Object.defineProperty(t,"GroupsDropdown",{enumerable:!0,get:function(){return o.GroupsDropdown}});var r=n(1392),a=n(1399),o=n(1402)},675:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"JourneyForm",{enumerable:!0,get:function(){return o.JourneyForm}}),Object.defineProperty(t,"JourneysTable",{enumerable:!0,get:function(){return o.JourneysTable}}),t.default=void 0,Object.defineProperty(t,"fetchTriggers",{enumerable:!0,get:function(){return r.fetchTriggers}}),Object.defineProperty(t,"moduleName",{enumerable:!0,get:function(){return a.moduleName}});var r=n(327),a=n(113),o=n(1412);t.default=r.reducer},676:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.SAVE_JOURNEY_TRIGGERS=void 0,t.fetchTriggers=function(e){return function(){var t=(0,o.default)(a.default.mark((function t(n){var r,o,c;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={schema:"shoutem.campaign.journey-triggers",request:{endpoint:i.shoutemUrls.appsApi("v1/apps/".concat(e,"/journey-triggers")),headers:{Accept:"application/vnd.api+json"}}},t.prev=1,t.next=4,n((0,l.find)(r));case 4:return o=t.sent,c=u.default.get(o,"payload.data"),t.abrupt("return",n(f(c)));case 9:throw t.prev=9,t.t0=t.catch(1),console.error(t.t0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},t.saveJourneyTriggers=f;var a=r(n(141)),o=r(n(142)),u=r(n(19)),l=n(23),i=n(63),c=t.SAVE_JOURNEY_TRIGGERS="SAVE_JOURNEY_TRIGGERS";function f(e){return{type:c,payload:e}}},677:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ShortcutsDropdown",{enumerable:!0,get:function(){return a.default}});var a=r(n(1418))},678:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={NOTIFICATION_INPUT_BODY_LABEL:"notification-input-body-label",NOTIFICATION_INPUT_CONTENT_SHORTCUT_LABEL:"notification-input-content-shortcut-label",NOTIFICATION_INPUT_CONTENT_URL_LABEL:"notification-input-content-url-label",NOTIFICATION_INPUT_DELAY_LABEL:"notification-input-delay-label",NOTIFICATION_INPUT_MINUTE_LABEL:"notification-input-minute-label",NOTIFICATION_INPUT_MINUTES_LABEL:"notification-input-minutes-label",NOTIFICATION_INPUT_HOUR_LABEL:"notification-input-hour-label",NOTIFICATION_INPUT_HOURS_LABEL:"notification-input-hours-label",NOTIFICATION_INPUT_DAY_LABEL:"notification-input-day-label",NOTIFICATION_INPUT_DAYS_LABEL:"notification-input-days-label",NOTIFICATION_INPUT_TARGET_LABEL:"notification-input-target-label",NOTIFICATION_INPUT_TARGET_URL:"notification-input-target-url-label",NOTIFICATION_INPUT_TARGET_SCREEN:"notification-input-target-screen-label",NOTIFICATION_INPUT_TITLE:"notification-input-title",NOTIFICATION_INPUT_TITLE_LABEL:"notification-input-notification-title-label"}},679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Notifications",{enumerable:!0,get:function(){return o.Notifications}}),t.default=void 0,Object.defineProperty(t,"moduleName",{enumerable:!0,get:function(){return a.moduleName}});var r=n(680),a=n(55),o=n(1433);t.default=r.reducer},680:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createNotification",{enumerable:!0,get:function(){return r.createNotification}}),Object.defineProperty(t,"deleteNotification",{enumerable:!0,get:function(){return r.deleteNotification}}),Object.defineProperty(t,"getNotifications",{enumerable:!0,get:function(){return o.getNotifications}}),Object.defineProperty(t,"getRawNotifications",{enumerable:!0,get:function(){return o.getRawNotifications}}),Object.defineProperty(t,"loadNotifications",{enumerable:!0,get:function(){return r.loadNotifications}}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return a.reducer}}),Object.defineProperty(t,"updateNotification",{enumerable:!0,get:function(){return r.updateNotification}});var r=n(1430),a=n(1431),o=n(1432)},681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"mapModelToView",{enumerable:!0,get:function(){return r.mapModelToView}}),Object.defineProperty(t,"mapViewToModel",{enumerable:!0,get:function(){return r.mapViewToModel}}),Object.defineProperty(t,"validateNotification",{enumerable:!0,get:function(){return a.validateNotification}});var r=n(1438),a=n(1439)},682:function(e,t,n){"use strict";var r=n(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SummaryFields",{enumerable:!0,get:function(){return a.default}});var a=r(n(1441))},697:function(e,t,n){"use strict";var r=n(2),a=n(12);n(698),n(336),n(337);var o=r(n(1)),u=r(n(21)),l=n(44),i=r(n(19)),c=r(n(50)),f=r(n(51)),s=n(35),d=n(23),p=n(627),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=o?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(630)),v=n(1469),E=n(1473),g=n(1476),h=r(n(1478));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}n(1481).polyfill();var y=new c.default(window.location.href),_=i.default.get(y.search(!0),"page",""),O=i.default.get(m,["pages",_]),P=new d.RioStateSerializer;document.addEventListener("shoutemready",(function(e){var t=P.deserialize(e.detail.config),n=t.context,r=t.parameters,a=t.state,c=new v.Page(n,r);f.default.init(n);var s=i.default.get(m,"pageWillMount");s&&s(c);var d=new p.SyncStateEngine({stateSerializer:P}),b=(0,h.default)(n,a,d);u.default.unmountComponentAtNode(document.getElementById("root")),u.default.render(o.default.createElement(l.Provider,{store:b},o.default.createElement(g.SyncStateEngineProvider,{syncStateEngine:d},o.default.createElement(E.LocalizationProvider,{context:n},o.default.createElement(v.PageProvider,{page:c},function(){if(!O)return o.default.createElement("div",null,"Page not found: ",_);var e=(0,v.connectPage)()(O);return o.default.createElement(e,null)}())))),document.getElementById("root"))}),!1),u.default.render(o.default.createElement(s.LoaderContainer,{size:"50px",isLoading:!0}),document.getElementById("root"))},900:function(e,t){}});